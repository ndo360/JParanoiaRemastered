{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","index.js","lib/add_character_panel.js","lib/advanced_spoof.js","lib/character_sheet_panel.js","lib/login_panel.js","lib/panel.js","lib/prompt_panel.js","../data/character_templates.json"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"client.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","'use strict';\r\n\r\nconst LoginPanel = require('./lib/login_panel.js');\r\nconst PromptPanel = require('./lib/prompt_panel.js');\r\nconst AddCharacterPanel = require('./lib/add_character_panel.js');\r\nconst CharacterSheetPanel = require('./lib/character_sheet_panel.js');\r\nconst AdvancedSpoofPanel = require('./lib/advanced_spoof.js');\r\n\r\nclass Client {\r\n\tconstructor() {\r\n\t\tlet wsurl = \"ws\" + window.location.href.substring(4); // replaces the \"http\" with \"ws\" (and also does \"https\" -> \"wss\" as well)\r\n\t\tthis.socket = new WebSocket(wsurl); // open a connection\r\n\t\tthis.socket.addEventListener('message', this.handle_message.bind(this));\r\n\r\n\t\tthis.chat_window = document.getElementById(\"chatwindow\");\r\n\t\tdocument.getElementById(\"main-text-input\").addEventListener(\"keydown\", this.text_input_keydown.bind(this));\r\n\t\tdocument.body.addEventListener(\"click\", this.handle_click.bind(this));\r\n\t\tdocument.body.addEventListener(\"change\", this.handle_change.bind(this));\r\n\t\tthis.player_names = {\"-1\": \"GM\"};\r\n\r\n\t\tthis.character_sheet = {};\r\n\t\tthis.character_sheets = {}; // GM only - the one above is the player's char sheet and this one and the one below are the GM's char sheets.\r\n\t\tthis.char_sheet_panels = {};\r\n\t}\r\n\r\n\thandle_message(e) {\r\n\t\tlet obj = JSON.parse(e.data);\r\n\t\tconsole.log(obj);\r\n\t\tif(obj.show_login_panel) {\r\n\t\t\tnew LoginPanel(this);\r\n\t\t}\r\n\t\tif(obj.be_gm) {\r\n\t\t\tdocument.body.classList.add(\"is-gm\"); // basically you can stick various classes on elements to make them only visible if youre a gm.\r\n\t\t}\r\n\t\tif(obj.frozen != null) { // only gm gets this.\r\n\t\t\tdocument.getElementById(\"frozen-checkbox\").checked = obj.frozen;\r\n\t\t}\r\n\t\tif(obj.add_player) {\r\n\t\t\tlet po = obj.add_player;\r\n\t\t\tthis.player_names[po.id] = po.name;\r\n\t\t\tlet elem = document.createElement(\"div\");\r\n\t\t\telem.classList.add(\"player-entry\");\r\n\t\t\telem.dataset.playernum = po.id;\r\n\t\t\telem.innerHTML = `\r\n<div style='text-align:center;${po.name_style}' class='player-name ${po.name_class}'></div>\r\n<div class='gm-only' style='font-size:12px;font-style:italic;text-align:center'>Player</div>\r\n<div>\r\n\t<input type='button' class='pm-button' value='PM'>\r\n\t<input type='button' class='edit-char-button gm-only' value='Edit Character Sheet'>\r\n\t<input type='button' class='spoof-button gm-only' value='Spoof'>\r\n\t<label class='gm-only'><input type='checkbox' class='mute-checkbox'>Mute</label>\r\n</div>\r\n`;\r\n\t\t\telem.querySelector('.player-name').textContent = po.name;\r\n\t\t\tdocument.getElementById(\"playerslist\").appendChild(elem);\r\n\t\t}\r\n\t\tif(obj.add_npc) {\r\n\t\t\tlet po = obj.add_npc;\r\n\t\t\tthis.player_names[po.id] = po.name;\r\n\t\t\tlet elem = document.createElement(\"div\");\r\n\t\t\telem.classList.add(\"player-entry\");\r\n\t\t\telem.dataset.playernum = po.id;\r\n\t\t\telem.innerHTML = `\r\n<div style='text-align:center;${po.name_style}' class='player-name ${po.name_class}'></div>\r\n<div style='font-size:12px;font-style:italic;text-align:center'>NPC</div>\r\n<div>\r\n\t<input type='button' class='spoof-button gm-only' value='Spoof'>\r\n</div>\r\n`;\r\n\t\t\telem.querySelector('.player-name').textContent = po.name;\r\n\t\t\tdocument.getElementById(\"npcslist\").appendChild(elem);\r\n\t\t}\r\n\t\tif(obj.to_chat) {\r\n\t\t\tlet items = obj.to_chat;\r\n\t\t\tif(!(items instanceof Array))\r\n\t\t\t\titems = [items];\r\n\t\t\tthis.modify_chat(() => {\r\n\t\t\t\tfor(let item of items) {\r\n\t\t\t\t\t// wrap them in divs and toss them at the end of the chat window`\r\n\t\t\t\t\tlet newdiv = document.createElement('div');\r\n\t\t\t\t\tnewdiv.innerHTML = item;\r\n\t\t\t\t\tthis.chat_window.appendChild(newdiv);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tif(obj.playernum) {\r\n\t\t\t// sets our playernum so we can retrieve our name\r\n\t\t\tthis.playernum = obj.playernum;\r\n\t\t}\r\n\t\tif(obj.character_sheet) {\r\n\t\t\tthis.character_sheet = obj.character_sheet;\r\n\t\t\tif(this.char_sheet_panel)\r\n\t\t\t\tthis.char_sheet_panel.update_data(this.character_sheet);\r\n\t\t}\r\n\t\tif(obj.character_sheets) {\r\n\t\t\tObject.assign(this.character_sheets, obj.character_sheets);\r\n\t\t\t// no need to update anything, there's no panels open since this is only sent on login\r\n\t\t\t// and only the GM can change the character sheets.\r\n\t\t}\r\n\t}\r\n\r\n\thandle_click(e) {\r\n\t\tlet input = e.target.closest(\"input\");\r\n\t\tlet playernum_elem = e.target.closest(\"[data-playernum]\");\r\n\t\tlet playernum = playernum_elem ? playernum_elem.dataset.playernum : null;\r\n\t\tif(input) {\r\n\t\t\tif(input.dataset.dice) {\r\n\t\t\t\tlet maxval = +input.dataset.dice;\r\n\t\t\t\tdocument.getElementById(\"dice-output\").value = Math.floor(Math.random()*maxval) + 1;\r\n\t\t\t}\r\n\t\t\tif(input.classList.contains(\"pm-button\") && playernum) {\r\n\t\t\t\tnew PromptPanel(`PM to ${this.player_names[playernum]}`).value_promise().then((val) => {\r\n\t\t\t\t\tif(!val)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tthis.socket.send(JSON.stringify({pm: {to: playernum, text: val}}));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif(input.classList.contains(\"spoof-button\") && playernum) {\r\n\t\t\t\tnew PromptPanel(`Spoofing ${this.player_names[playernum]}`).value_promise().then((val) => {\r\n\t\t\t\t\tif(!val)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tthis.socket.send(JSON.stringify({spoof: {victim: playernum, text: val}}));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (input.classList.contains(\"advanced-spoof-button\")) {\r\n\t\t\t\tnew AdvancedSpoofPanel(this);\r\n\t\t\t}\r\n\t\t\tif(input.classList.contains(\"char-sheet-button\") && !this.char_sheet_panel) {\r\n\t\t\t\tthis.char_sheet_panel = new CharacterSheetPanel(this, false);\r\n\t\t\t\tthis.char_sheet_panel.update_data(this.character_sheet);\r\n\t\t\t\tthis.char_sheet_panel.update_name(this.player_names[this.playernum]);\r\n\t\t\t\tthis.char_sheet_panel.wait_until_close().then(() => {\r\n\t\t\t\t\tthis.char_sheet_panel = null;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (input.classList.contains(\"add-char-button\")) {\r\n\t\t\t\tnew AddCharacterPanel(this);\r\n\t\t\t}\r\n\t\t\tif(input.classList.contains(\"edit-char-button\") && playernum && !this.char_sheet_panels[playernum]) {\r\n\t\t\t\tthis.char_sheet_panels[playernum] = new CharacterSheetPanel(this, true, playernum);\r\n\t\t\t\tthis.char_sheet_panels[playernum].update_data(this.character_sheets[playernum]);\r\n\t\t\t\tthis.char_sheet_panels[playernum].update_name(this.player_names[playernum]);\r\n\t\t\t\tthis.char_sheet_panels[playernum].wait_until_close().then(() => {\r\n\t\t\t\t\tthis.char_sheet_panels[playernum] = null;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet pm_link = e.target.closest(\"[data-pm]\");\r\n\t\tif(pm_link) {\r\n\t\t\tnew PromptPanel(`PM reply`).value_promise().then((val) => {\r\n\t\t\t\tif(!val)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tthis.socket.send(JSON.stringify({pm: {to: pm_link.dataset.pm, text: val}}));\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\thandle_change(e) {\r\n\t\tlet input = e.target.closest(\"input\");\r\n\t\tlet playernum_elem = e.target.closest(\"[data-playernum]\");\r\n\t\tlet playernum = playernum_elem ? playernum_elem.dataset.playernum : null;\r\n\t\tif(input) {\r\n\t\t\tif(input.id == \"frozen-checkbox\") {\r\n\t\t\t\tthis.socket.send(JSON.stringify({frozen: !!input.checked}));\r\n\t\t\t}\r\n\t\t\tif(input.classList.contains(\"mute-checkbox\") && playernum) {\r\n\t\t\t\tif(input.checked)\r\n\t\t\t\t\tthis.socket.send(JSON.stringify({mute_player: playernum}));\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.socket.send(JSON.stringify({unmute_player: playernum}));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttext_input_keydown(e) {\r\n\t\tlet text_input = document.getElementById(\"main-text-input\");\r\n\t\tif(e.which == 13) { // enter\r\n\t\t\tlet text = text_input.value;\r\n\t\t\ttext_input.value = \"\";\r\n\t\t\tthis.socket.send(JSON.stringify({chat: text}));\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n\tmodify_chat(callback) { // wrap your chat modifications with this function so that the scroll gets updated properly\r\n\t\tlet do_scroll = false;\r\n\t\tif(Math.ceil(this.chat_window.scrollTop + this.chat_window.clientHeight) >= Math.floor(this.chat_window.scrollHeight)) // check if the thing is scrolled all the way down\r\n\t\t\tdo_scroll = true; // makes it keep itself scrolled down\r\n\t\tcallback(); // now the chat window gets modified\r\n\t\t// and now we scroll all the way down if it was that way before\r\n\t\tif(do_scroll)\r\n\t\t\tthis.chat_window.scrollTop = this.chat_window.scrollHeight - this.chat_window.clientHeight;\r\n\t}\r\n}\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n\t// alrighty let's connect\r\n\twindow.client = new Client();\r\n});\r\n","'use strict';\r\nconst Panel = require('./panel.js');\r\nconst character_templates = require('../../data/character_templates.json')\r\n\r\nclass AddCharacterPanel extends Panel {\r\n    constructor(client) {\r\n        super({ width: 400, height: 140, title: \"Add Character\" });\r\n        this.client = client;\r\n        this.content_obj.innerHTML = `\r\n<div><select class='charsheet_list'><option value='all' selected>ALL</option></select></div>\r\n<input type='button' class='confirm-button' value='Load'>\r\n`;\r\n        this.populate_list();\r\n        this.return_val = null;\r\n        this.$('.confirm-button').addEventListener(\"click\", () => {\r\n            this.send();\r\n        });\r\n    }\r\n\r\n    populate_list() {\r\n        for (let i = 0; i < character_templates.characters.length; i++) {\r\n            let elem = document.createElement(\"option\");\r\n            elem.value = character_templates.characters[i].name;\r\n            elem.textContent = elem.value; //TODO: Make this code suck less?\r\n            this.$('.charsheet_list').appendChild(elem);\r\n        }\r\n    }\r\n\r\n    send() {\r\n        let character = this.$('.charsheet_list').value;\r\n        if (character == 'all') //I'm sorry //TODO: Make this code suck less?\r\n            for (let i = 0; i < character_templates.characters.length; i++) {\r\n                let all_chars = character_templates.characters[i].name;\r\n                this.client.socket.send(JSON.stringify({add_character: all_chars}));\r\n            }\r\n        else\r\n            this.client.socket.send(JSON.stringify({add_character: character}));\r\n    }\r\n}\r\n\r\nmodule.exports = AddCharacterPanel;","'use strict';\r\nconst Panel = require('./panel.js');\r\n\r\nclass AdvancedSpoofPanel extends Panel {\r\n\tconstructor(client) {\r\n\t\tsuper({width: 400, height: 140, title: \"Advanced Spoofing\"});\r\n\t\tthis.client = client;\r\n\t\tthis.content_obj.innerHTML = `\r\n<div><select class='spoof_from'></select> -> <select class='spoof_to'><option value='' selected>ALL</option></select></div>\r\n<input style='width:90%' type='text' class='prompt-value'></input>\r\n<input type='button' class='confirm-button' value='Send'>\r\n`;\r\n\t\tfor(let playernum of Object.keys(client.player_names)) {\r\n\t\t\tif(playernum == \"-1\")\r\n\t\t\t\tcontinue;\r\n\t\t\tlet player_name = client.player_names[playernum];\r\n\t\t\tlet elema = document.createElement(\"option\");\r\n\t\t\telema.value = playernum;\r\n\t\t\telema.textContent = player_name;\r\n\t\t\tlet elemb = document.createElement(\"option\");\r\n\t\t\telemb.value = playernum;\r\n\t\t\telemb.textContent = player_name;\r\n\t\t\tthis.$('.spoof_from').appendChild(elema);\r\n\t\t\tthis.$('.spoof_to').appendChild(elemb);\r\n\t\t}\r\n\t\tthis.return_val = null;\r\n\t\tthis.$('.confirm-button').addEventListener(\"click\", () => {\r\n\t\t\tthis.send();\r\n\t\t});\r\n\t\tthis.$('.prompt-value').addEventListener(\"keydown\", (e) => {\r\n\t\t\tif(e.which == 13) { // enter\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.send();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.$('.prompt-value').focus();\r\n\t}\r\n\r\n\tsend() {\r\n\t\tlet text = this.$('.prompt-value').value;\r\n\t\tlet from = this.$('.spoof_from').value;\r\n\t\tlet to = this.$('.spoof_to').value;\r\n\t\tfrom = from == \"\" ? null : +from;\r\n\t\tto = to == \"\" ? null : +to;\r\n\t\tthis.client.socket.send(JSON.stringify({spoof: {victim: from, pm_to: to, text: text}}));\r\n\t\tthis.$('.prompt-value').value = \"\";\r\n\t}\r\n}\r\n\r\nmodule.exports = AdvancedSpoofPanel;\r\n","'use strict';\r\nconst Panel = require('./panel.js');\r\n\r\nclass CharacterSheetPanel extends Panel {\r\n\tconstructor(client, edit_mode = true, playernum) {\r\n\t\tsuper({width: 750, height: 900, title:\"Character Sheet\"});\r\n\t\tthis.client = client;\r\n\t\tthis.playernum = playernum;\r\n\t\tthis.content_obj.innerHTML =`\r\n<div><input type='button' class='save-button' value = \"Save and Send Sheet\"></div>\r\n<h1 class=\"charname\">Gen-R-ICC-1</h1>\r\n<div class='left-part'>\r\n\t<div class='margins'><b>Service Group: </b><span data-csfield=\"service_group\"></span></div>\r\n\t<div class='margins'><b>Firm: </b><span data-csfield=\"firm\"></span></div>\r\n\t<div class='margins'><b>Gender: </b><span data-csfield=\"gender\"></span></div>\r\n\t<div class='margins'><b>Tics: </b><span data-csfield=\"tics\" class='fullwidth'></span></div>\r\n\t<table class='margins'>\r\n\t\t<tr>\r\n\t\t\t<td><b>MBD: </b></td>\r\n\t\t\t<td><label><input type='checkbox' data-csfield=\"mbd1\">Team Leader</label></td>\r\n\t\t\t<td><label><input type='checkbox' data-csfield=\"mbd2\">Loyalty Officer</label></td>\r\n\t\t\t<td><label><input type='checkbox' data-csfield=\"mbd3\">Hygiene Officer</label></td>\r\n\t\t\t<td><label><input type='checkbox' data-csfield=\"mbd4\">Ads & Branding</label></td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td></td>\r\n\t\t\t<td><label><input type='checkbox' data-csfield=\"mbd5\">C&RO</label></td>\r\n\t\t\t<td><label><input type='checkbox' data-csfield=\"mbd6\">Equipment Guy</label></td>\r\n\t\t\t<td><label><input type='checkbox' data-csfield=\"mbd7\">Happiness Officer</label></td>\r\n\t\t\t<td><label><input type='checkbox' data-csfield=\"mbd8\">Agent Provocateur</label></td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td></td>\r\n\t\t\t<td><label><input type='checkbox' data-csfield=\"mbd9\">Alertness Officer</label></td>\r\n\t\t\t<td><label><input type='checkbox' data-csfield=\"mbd10\">Financial Officer</label></td>\r\n\t\t\t<td><label><input type='checkbox' data-csfield=\"mbd11\">Medical Officer</label></td>\r\n\t\t\t<td><label><input type='checkbox' data-csfield=\"mbd12\">Public Relations</label></td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td></td>\r\n\t\t\t<td colspan=3><input type='checkbox' data-csfield=\"mbd_custom\"><span data-csfield=\"mbd_custom_name\"></span></td>\r\n\t\t</tr>\r\n\t</table>\r\n</div>\r\n<table class='margins'>\r\n\t<tr><td colspan=3><h2>Action Skills</h2></td></tr>\r\n\t<tr>\r\n\t\t<td>\r\n\t\t\t<div class='skill-header'>Management<span data-csfield=\"skill-mgmt\"></span></div>\r\n\t\t\t<table class='skill-entry'>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Bootlicking</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-bootlicking\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Chutzpah</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-chutzpah\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Con Games</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-congames\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Hygiene</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-hygiene\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Interrogation</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-interrogation\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Intimidation</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-intimidation\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Moxie</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-moxie\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Oratory</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-oratory\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-mgmt-cn1\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-mgmt-cv1\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-mgmt-cn2\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-mgmt-cv2\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-mgmt-cn3\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-mgmt-cv3\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-mgmt-cn4\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-mgmt-cv4\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</table>\r\n\t\t</td>\r\n\t\t<td>\r\n\t\t\t<div class='skill-header'>Stealth<span data-csfield=\"skill-stealth\"></div>\r\n\t\t\t<table class='skill-entry'>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Concealment</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-concealment\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Disguise</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-disguise\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>High Alert</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-highalert\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Security Systems</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-securitysystems\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Shadowing</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-shadowing\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Sleight of Hand</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-sleightofhand\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Sneaking</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-sneaking\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Surveillance</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-surveillance\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-stealth-cn1\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-stealth-cv1\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-stealth-cn2\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-stealth-cv2\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-stealth-cn3\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-stealth-cv3\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-stealth-cn4\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-stealth-cv4\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</table>\r\n\t\t</td>\r\n\t\t<td>\r\n\t\t\t<div class='skill-header'>Violence<span data-csfield=\"skill-violence\"></div>\r\n\t\t\t<table class='skill-entry'>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Agility</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-agility\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Energy Weapons</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-energyweps\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Demolition</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-demolition\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Field Weapons</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-fieldweps\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Fine Manipulation</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-finemanip\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Hand Weapons</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-handweps\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Projectile Weapons</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-projweps\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Thrown Weapons</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-thrownweps\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Unarmed Combat</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-unarmedcombat\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Vehicular Combat</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-vehicularcombat\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-violence-cn1\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-violence-cv1\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-violence-cn2\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-violence-cv2\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</table>\r\n\t\t</td>\r\n\t</tr>\r\n\t<tr><td colspan=3><h2>Knowledge Skills</h2></td></tr>\r\n\t<tr>\r\n\t\t<td>\r\n\t\t\t<div class='skill-header'>Hardware<span data-csfield=\"skill-hardware\"></span></div>\r\n\t\t\t<table class='skill-entry'>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Bot Ops & Maint</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-botmaint\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Chemical Eng.</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-chemeng\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Electonic Eng.</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-electreng\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Habitat Eng.</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-habeng\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Mechanical Eng.</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-mecheng\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Nuclear Eng.</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-nukeeng\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Vehicle Ops & Maint.</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-vehiclemaint\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Weapon & Armor Maint.</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-weaponmaint\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-hardware-cn1\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-hardware-cv1\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-hardware-cn2\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-hardware-cv2\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-hardware-cn3\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-hardware-cv3\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-hardware-cn4\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-hardware-cv4\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</table>\r\n\t\t</td>\r\n\t\t<td>\r\n\t\t\t<div class='skill-header'>Software<span data-csfield=\"skill-software\"></span></div>\r\n\t\t\t<table class='skill-entry'>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Bot Programming</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-botcode\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>C-Bay</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-cbay\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Data Analysis</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-dataanalysis\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Data Search</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-datasearch\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Financial Systems</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-financialsystems\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Hacking</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-hacking\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Operating Systems</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-oses\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Vehicle Programming</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-vehiclecode\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-software-cn1\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-software-cv1\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-software-cn2\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-software-cv2\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-software-cn3\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-software-cv3\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-software-cn4\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-software-cv4\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</table>\r\n\t\t</td>\r\n\t\t<td>\r\n\t\t\t<div class='skill-header'>Wetware<span data-csfield=\"skill-wetware\"></span></div>\r\n\t\t\t<table class='skill-entry'>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Biosciences</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-biosciences\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Bioweapons</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-bioweps\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Cloning</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-cloning\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Medical</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-medical\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Outdoor Life</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-outdoorlife\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Pharmatherapy</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-pharmatherapy\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Psychotherapy</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-psychotherapy\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part'>Suggestion</td>\r\n\t\t\t\t\t<td data-csfield=\"skill-suggestion\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-wetware-cn1\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-wetware-cv1\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-wetware-cn2\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-wetware-cv2\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-wetware-cn3\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-wetware-cv3\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class='right-part' data-csfield=\"skill-wetware-cn4\"></td>\r\n\t\t\t\t\t<td data-csfield=\"skill-wetware-cv4\"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</td>\r\n\t\t</table>\r\n\t</tr>\r\n</table>\r\n`;\r\n\t\tfor(let elem of this.$$('[data-csfield]')) {\r\n\t\t\tif(elem.tagName == \"INPUT\") {\r\n\t\t\t\tif(elem.type == \"checkbox\") {\r\n\t\t\t\t\tif(!edit_mode)\r\n\t\t\t\t\t\telem.addEventListener(\"click\", (e)=>{e.preventDefault(); return false;}); // prevent click events. The checkbox is nearly unreadable if it's grey, so doing this instead\r\n\t\t\t\t} else {\r\n\t\t\t\t\telem.readonly = !edit_mode;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\telem.contentEditable = edit_mode;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(edit_mode) {\r\n\t\t\tthis.$('.save-button').addEventListener(\"click\", () => {\r\n\t\t\t\tlet data = this.get_data();\r\n\t\t\t\tclient.socket.send(JSON.stringify({update_character_sheet: {for: this.playernum, data}}));\r\n\t\t\t\tthis.client.character_sheets[this.playernum] = data;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.$('.save-button').style.display = \"none\"; // ree get rid of that button\r\n\t\t}\r\n\t}\r\n\r\n\tupdate_name(name) {\r\n\t\tthis.$('.charname').textContent = name;\r\n\t}\r\n\tupdate_data(data) {\r\n\t\tif(!data)\r\n\t\t\treturn; // ooh it's blank.\r\n\t\tfor(let elem of this.$$('[data-csfield]')) {\r\n\t\t\tlet key = elem.dataset.csfield;\r\n\t\t\tif(elem.tagName == \"INPUT\") {\r\n\t\t\t\tif(elem.type == \"checkbox\") { //checkboxes use checked instead of value\r\n\t\t\t\t\telem.checked = data[key];\r\n\t\t\t\t} else {\r\n\t\t\t\t\telem.value = string_wrapper(data[key]);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\telem.innerHTML = string_wrapper(data[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tget_data() { // literally the same as update_data but the assignments are swapped.\r\n\t\tlet data = {};\r\n\t\tfor(let elem of this.$$('[data-csfield]')) {\r\n\t\t\tlet key = elem.dataset.csfield;\r\n\t\t\tif(elem.tagName == \"INPUT\") {\r\n\t\t\t\tif(elem.type == \"checkbox\") {\r\n\t\t\t\t\tdata[key] = elem.checked;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdata[key] = elem.value;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdata[key] = elem.innerHTML;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn data;\r\n\t}\r\n}\r\n\r\nfunction string_wrapper(obj) { // prevents things like \"undefined\" and \"null\" showing up.\r\n\tif(obj == null)\r\n\t\treturn \"\";\r\n\telse\r\n\t\treturn \"\"+obj;\r\n}\r\n\r\nmodule.exports = CharacterSheetPanel;\r\n","'use strict';\r\nconst Panel = require('./panel.js');\r\n\r\nclass LoginPanel extends Panel {\r\n\tconstructor(client) {\r\n\t\tsuper({width: 240, height: 288, title: \"Login\", can_close: false});\r\n\t\tthis.client = client;\r\n\t\tthis.content_obj.innerHTML = `\r\n<form>\r\n<div style='display:inline-block;text-align:left'>\r\n\t<div class='available_players'></div>\r\n\t<label><input type='radio' class='observe-checkbox' name='login-type' value='observe' checked>Observe</label>\r\n</div><br></form>\r\n<input type='password' class='password-field' placeholder=\"Password (default is 'asdf')\" disabled><br>\r\n<div style='color:red' class='login-fail-reason'></div>\r\n<input type='button' class='login-button' value='Login'></input>\r\n`;\r\n\t\tthis.$('.login-button').addEventListener(\"click\", () => {\r\n\t\t\tlet selected_elem = this.$('input:checked');\r\n\t\t\tconsole.log(selected_elem);\r\n\t\t\tif(selected_elem.dataset.playernum) {\r\n\t\t\t\tlet sel_player = +selected_elem.dataset.playernum;\r\n\t\t\t\tlet password = this.$('.password-field').value;\r\n\t\t\t\tconsole.log(\"GO!\");\r\n\t\t\t\tthis.client.socket.send(JSON.stringify({password, sel_player, login: true}));\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.content_obj.addEventListener(\"change\", (e) => { // handle observed changes\r\n\t\t\tconsole.log(e);\r\n\t\t\tthis.$('.password-field').disabled = this.$('.observe-checkbox').checked;\r\n\t\t});\r\n\t\tthis.handle_message = this.handle_message.bind(this);\r\n\t\tthis.client.socket.addEventListener(\"message\", this.handle_message);\r\n\t}\r\n\r\n\thandle_message(e) {\r\n\t\tlet obj = JSON.parse(e.data);\r\n\t\tif(obj.avail_players) {\r\n\t\t\tlet curr_playernum = this.$(`.available_players input[checked]`);\r\n\t\t\tcurr_playernum = curr_playernum && +curr_playernum.dataset.playernum; // get the currently selected player if theres a checked element\r\n\t\t\tthis.$(`.available_players`).innerHTML = \"\"; // clear it.\r\n\t\t\tfor(let [key, val] of Object.entries(obj.avail_players)) {\r\n\t\t\t\tlet label = document.createElement(\"label\");\r\n\t\t\t\tlabel.textContent = val;\r\n\t\t\t\tlabel.style.display = \"block\"; // so that they each are on different lines\r\n\t\t\t\tlet radiobutton = document.createElement(\"input\");\r\n\t\t\t\tradiobutton.type = \"radio\";\r\n\t\t\t\tradiobutton.dataset.playernum = key;\r\n\t\t\t\tradiobutton.name = \"login-type\";\r\n\t\t\t\tlabel.prepend(radiobutton); // add it before the text\r\n\t\t\t\tthis.$(`.available_players`).appendChild(label);\r\n\t\t\t\tif(+key == curr_playernum) {\r\n\t\t\t\t\tradiobutton.checked = true;\r\n\t\t\t\t\tcurr_playernum = null; // mark that we've resolved this and don't need to check the observe.\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(curr_playernum) { // there was a player checked, but it's gone now, so go back to observe\r\n\t\t\t\tthis.$(`.observe-checkbox`).checked = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(obj.login_fail) {\r\n\t\t\tthis.$('.login-fail-reason').textContent = obj.login_fail;\r\n\t\t}\r\n\t\tif(obj.login_success) {\r\n\t\t\tthis.close();\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tthis.client.socket.removeEventListener(\"message\", this.handle_message);\r\n\t\tsuper.close(...arguments);\r\n\t}\r\n}\r\n\r\nmodule.exports = LoginPanel;\r\n","'use strict';\r\n\r\nclass Panel {\r\n\tconstructor({width=400, height=400, title=\"\", can_close = true} = {}) {\r\n\t\tvar left = document.documentElement.clientWidth / 2 - width / 2;\r\n\t\tvar top = document.documentElement.clientHeight / 2 - height / 2;\r\n\t\tthis.container_obj = document.createElement('div');\r\n\t\tObject.assign(this.container_obj.style, {width:width+\"px\", height:height+\"px\", left:left+\"px\", top:top+\"px\"});\r\n\t\tthis.container_obj.classList.add('uiframe-container');\r\n\t\tthis.panel_obj = document.createElement('div');\r\n\t\tthis.panel_obj.classList.add('uiframe');\r\n\t\tthis.panel_obj.tabIndex = -1;\r\n\t\tthis.header_obj = document.createElement('div');\r\n\t\tthis.header_obj.classList.add('uiframe-header');\r\n\t\tthis.title_node = document.createTextNode(title);\r\n\t\tthis.header_obj.appendChild(this.title_node);\r\n\t\tthis.content_obj = document.createElement('div');\r\n\t\tthis.content_obj.classList.add('uiframe-content');\r\n\t\tthis.panel_obj.appendChild(this.header_obj);\r\n\t\tthis.panel_obj.appendChild(this.content_obj);\r\n\t\tthis.container_obj.appendChild(this.panel_obj);\r\n\t\tdocument.getElementById('uiframes-container').appendChild(this.container_obj);\r\n\r\n\t\tthis.header_obj.addEventListener(\"mousedown\", this._start_drag.bind(this));\r\n\t\tthis.container_obj.addEventListener(\"mousedown\", this._start_resize.bind(this));\r\n\t\tthis.container_obj.addEventListener(\"mousemove\", this._container_mousemove.bind(this));\r\n\t\tthis.container_obj.addEventListener(\"mouseout\", this._container_mouseout.bind(this));\r\n\r\n\t\tthis.can_close = can_close;\r\n\r\n\t\tif(can_close) {\r\n\t\t\tthis.close_button = document.createElement('div');\r\n\t\t\tthis.close_button.classList.add('uiframe-close-button');\r\n\t\t\tthis.header_obj.appendChild(this.close_button);\r\n\r\n\t\t\tthis.close_button.addEventListener(\"click\", () => {\r\n\t\t\t\tthis.close();\r\n\t\t\t});\r\n\t\t\tthis.close_button.addEventListener(\"mousedown\", (e) => {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_start_drag(e) {\r\n\t\tif(e.defaultPrevented)\r\n\t\t\treturn;\r\n\t\tif(e.target != this.header_obj) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar pad = (this.container_obj.offsetWidth - this.panel_obj.offsetWidth)/2;\r\n\t\te.preventDefault();\r\n\t\tthis.panel_obj.focus();\r\n\t\tvar lastclientx = e.clientX;\r\n\t\tvar lastclienty = e.clientY;\r\n\t\tvar mousemove = (e) => {\r\n\t\t\tvar dx = e.clientX - lastclientx;\r\n\t\t\tvar dy = e.clientY - lastclienty;\r\n\t\t\tlastclientx = e.clientX;\r\n\t\t\tlastclienty = e.clientY;\r\n\t\t\tvar {left:oldleft, top:oldtop} = this.container_obj.getBoundingClientRect();\r\n\t\t\tthis.container_obj.style.left = Math.min(document.documentElement.clientWidth-160-pad, Math.max(-pad,oldleft + dx)) + \"px\";\r\n\t\t\tthis.container_obj.style.top = Math.min(document.documentElement.clientHeight-35-pad, Math.max(-pad,oldtop + dy)) + \"px\";\r\n\t\t};\r\n\t\tvar mouseup = () => {\r\n\t\t\tdocument.removeEventListener(\"mousemove\", mousemove);\r\n\t\t\tdocument.removeEventListener(\"mouseup\", mouseup);\r\n\t\t};\r\n\t\tdocument.addEventListener(\"mousemove\", mousemove);\r\n\t\tdocument.addEventListener(\"mouseup\", mouseup);\r\n\t}\r\n\r\n\t_resize_meta(e) { // figure out which edge the mouse cursor is on and return an object with the appropriate flags\r\n\t\tvar pad = (this.container_obj.offsetWidth - this.panel_obj.offsetWidth)/2;\r\n\t\tvar width = this.panel_obj.offsetWidth;\r\n\t\tvar height = this.panel_obj.offsetHeight;\r\n\t\tvar out = {drag_right: false, drag_left: false, drag_up: false, drag_down: false, cursor: \"default\"};\r\n\t\tif(e.target == this.container_obj) {\r\n\t\t\tif(e.offsetX < pad)\r\n\t\t\t\tout.drag_left = true;\r\n\t\t\tif(e.offsetY < pad)\r\n\t\t\t\tout.drag_up = true;\r\n\t\t\tif(e.offsetX > (width + pad))\r\n\t\t\t\tout.drag_right = true;\r\n\t\t\tif(e.offsetY > (height + pad))\r\n\t\t\t\tout.drag_down = true;\r\n\t\t\tif((out.drag_left && out.drag_down) || (out.drag_up && out.drag_right)) {\r\n\t\t\t\tout.cursor = \"nesw-resize\";\r\n\t\t\t} else if((out.drag_left && out.drag_up) || (out.drag_down && out.drag_right)) {\r\n\t\t\t\tout.cursor = \"nwse-resize\";\r\n\t\t\t} else if(out.drag_left || out.drag_right) {\r\n\t\t\t\tout.cursor = \"ew-resize\";\r\n\t\t\t} else if(out.drag_up || out.drag_down) {\r\n\t\t\t\tout.cursor = \"ns-resize\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tout.can_resize = out.drag_right || out.drag_left || out.drag_up || out.drag_down;\r\n\t\treturn out;\r\n\t}\r\n\r\n\t_start_resize(e) {\r\n\t\t// bring the panel to the front\r\n\t\tif(this.container_obj != document.getElementById('uiframes-container').lastChild)\r\n\t\t\tdocument.getElementById('uiframes-container').appendChild(this.container_obj);\r\n\r\n\t\t// figure out which edges we're resizing\r\n\t\tvar resize_meta = this._resize_meta(e);\r\n\t\tif(!resize_meta.can_resize) // oof we're not resizing\r\n\t\t\treturn;\r\n\t\t// figure out how much space is around the edges\r\n\t\tvar pad = (this.container_obj.offsetWidth - this.panel_obj.offsetWidth)/2;\r\n\t\te.preventDefault();\r\n\t\tthis.panel_obj.focus();\r\n\t\tvar lastclientx = e.clientX;\r\n\t\tvar lastclienty = e.clientY;\r\n\t\t// now start dragging\r\n\t\tvar mousemove = (e) => {\r\n\t\t\tvar dx = e.clientX - lastclientx;\r\n\t\t\tvar dy = e.clientY - lastclienty;\r\n\t\t\tlastclientx = e.clientX;\r\n\t\t\tlastclienty = e.clientY; // figure out how much we moved\r\n\t\t\tvar {left:oldleft, top:oldtop} = this.container_obj.getBoundingClientRect();\r\n\t\t\tif(resize_meta.drag_left) { // and now resize ourselves\r\n\t\t\t\tthis.container_obj.style.left = Math.min(document.documentElement.clientWidth-160-pad,Math.max(-pad,oldleft + dx)) + \"px\";\r\n\t\t\t\tthis.container_obj.style.width = Math.max(160,this.panel_obj.clientWidth - dx) + \"px\";\r\n\t\t\t} else if(resize_meta.drag_right) {\r\n\t\t\t\tthis.container_obj.style.width = Math.max(160,this.panel_obj.clientWidth + dx) + \"px\";\r\n\t\t\t}\r\n\t\t\tif(resize_meta.drag_up) {\r\n\t\t\t\tthis.container_obj.style.top = Math.min(document.documentElement.clientHeight-35-pad,Math.max(-pad,oldtop + dy)) + \"px\";\r\n\t\t\t\tthis.container_obj.style.height = Math.max(35,this.panel_obj.clientHeight - dy) + \"px\";\r\n\t\t\t} else if(resize_meta.drag_down) {\r\n\t\t\t\tthis.container_obj.style.height = Math.max(35,this.panel_obj.clientHeight + dy) + \"px\";\r\n\t\t\t}\r\n\t\t};\r\n\t\tvar mouseup = () => {\r\n\t\t\tdocument.removeEventListener(\"mousemove\", mousemove);\r\n\t\t\tdocument.removeEventListener(\"mouseup\", mouseup);\r\n\t\t};\r\n\t\tdocument.addEventListener(\"mousemove\", mousemove);\r\n\t\tdocument.addEventListener(\"mouseup\", mouseup);\r\n\t}\r\n\r\n\t_container_mousemove(e) {\r\n\t\tvar resize_meta = this._resize_meta(e);\r\n\t\tthis.container_obj.style.cursor = resize_meta.cursor;\r\n\t}\r\n\t_container_mouseout() {\r\n\t\tthis.container_obj.style.cursor = \"default\";\r\n\t}\r\n\r\n\tget title() {\r\n\t\treturn this.title_node.textContent;\r\n\t}\r\n\r\n\tset title(val) {\r\n\t\tthis.title_node.textContent = val;\r\n\t}\r\n\r\n\tclose() {\r\n\t\tdocument.getElementById('uiframes-container').removeChild(this.container_obj); // remove ourselves!\r\n\t\tif(this.close_promise_resolve)\r\n\t\t\tthis.close_promise_resolve();\r\n\t}\r\n\r\n\twait_until_close() {\r\n\t\tif(this.close_promise)\r\n\t\t\treturn this.close_promise;\r\n\t\treturn this.close_promise = new Promise(resolve => {\r\n\t\t\tthis.close_promise_resolve = resolve;\r\n\t\t});\r\n\t}\r\n\r\n\t// convenience functions\r\n\t$(sel) {\r\n\t\treturn this.content_obj.querySelector(sel);\r\n\t}\r\n\t$$(sel) {\r\n\t\treturn this.content_obj.querySelectorAll(sel);\r\n\t}\r\n}\r\n\r\nmodule.exports = Panel;\r\n","'use strict';\r\nconst Panel = require('./panel.js');\r\n\r\nclass PromptPanel extends Panel {\r\n\tconstructor(title) {\r\n\t\tsuper({width: 400, height: 100, title});\r\n\t\tthis.content_obj.innerHTML = `\r\n<input style='width:90%' type='text' class='prompt-value'></input>\r\n<input type='button' class='confirm-button' value='OK'>\r\n`;\r\n\t\tthis.return_val = null;\r\n\t\tthis.$('.confirm-button').addEventListener(\"click\", () => {\r\n\t\t\tthis.return_val = this.$('.prompt-value').value;\r\n\t\t\tthis.close();\r\n\t\t});\r\n\t\tthis.$('.prompt-value').addEventListener(\"keydown\", (e) => {\r\n\t\t\tif(e.which == 13) { // enter\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.return_val = this.$('.prompt-value').value;\r\n\t\t\t\tthis.close();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.$('.prompt-value').focus();\r\n\t}\r\n\r\n\tasync value_promise() {\r\n\t\tawait this.wait_until_close();\r\n\t\treturn this.return_val;\r\n\t}\r\n}\r\n\r\nmodule.exports = PromptPanel;\r\n","module.exports={\r\n\t\"characters\": [\r\n\t\t{\r\n\t\t\t\"name\": \"Conn-R-HSN-1\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"name\": \"Douglas-R-YEE-1\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"name\": \"John-R-SVN-1\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"name\": \"Kym-R-AHI-1\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"name\": \"Morgan-R-DNR-1\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"name\": \"Pat-R-SWF-1\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"name\": \"Bob-R-EGH-1\"\r\n\t\t},\r\n\t\t\r\n\t]\r\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJpbmRleC5qcyIsImxpYi9hZGRfY2hhcmFjdGVyX3BhbmVsLmpzIiwibGliL2FkdmFuY2VkX3Nwb29mLmpzIiwibGliL2NoYXJhY3Rlcl9zaGVldF9wYW5lbC5qcyIsImxpYi9sb2dpbl9wYW5lbC5qcyIsImxpYi9wYW5lbC5qcyIsImxpYi9wcm9tcHRfcGFuZWwuanMiLCIuLi9kYXRhL2NoYXJhY3Rlcl90ZW1wbGF0ZXMuanNvbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4YkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCBMb2dpblBhbmVsID0gcmVxdWlyZSgnLi9saWIvbG9naW5fcGFuZWwuanMnKTtcclxuY29uc3QgUHJvbXB0UGFuZWwgPSByZXF1aXJlKCcuL2xpYi9wcm9tcHRfcGFuZWwuanMnKTtcclxuY29uc3QgQWRkQ2hhcmFjdGVyUGFuZWwgPSByZXF1aXJlKCcuL2xpYi9hZGRfY2hhcmFjdGVyX3BhbmVsLmpzJyk7XHJcbmNvbnN0IENoYXJhY3RlclNoZWV0UGFuZWwgPSByZXF1aXJlKCcuL2xpYi9jaGFyYWN0ZXJfc2hlZXRfcGFuZWwuanMnKTtcclxuY29uc3QgQWR2YW5jZWRTcG9vZlBhbmVsID0gcmVxdWlyZSgnLi9saWIvYWR2YW5jZWRfc3Bvb2YuanMnKTtcclxuXHJcbmNsYXNzIENsaWVudCB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHRsZXQgd3N1cmwgPSBcIndzXCIgKyB3aW5kb3cubG9jYXRpb24uaHJlZi5zdWJzdHJpbmcoNCk7IC8vIHJlcGxhY2VzIHRoZSBcImh0dHBcIiB3aXRoIFwid3NcIiAoYW5kIGFsc28gZG9lcyBcImh0dHBzXCIgLT4gXCJ3c3NcIiBhcyB3ZWxsKVxyXG5cdFx0dGhpcy5zb2NrZXQgPSBuZXcgV2ViU29ja2V0KHdzdXJsKTsgLy8gb3BlbiBhIGNvbm5lY3Rpb25cclxuXHRcdHRoaXMuc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLmhhbmRsZV9tZXNzYWdlLmJpbmQodGhpcykpO1xyXG5cclxuXHRcdHRoaXMuY2hhdF93aW5kb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoYXR3aW5kb3dcIik7XHJcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1haW4tdGV4dC1pbnB1dFwiKS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLnRleHRfaW5wdXRfa2V5ZG93bi5iaW5kKHRoaXMpKTtcclxuXHRcdGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlX2NsaWNrLmJpbmQodGhpcykpO1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHRoaXMuaGFuZGxlX2NoYW5nZS5iaW5kKHRoaXMpKTtcclxuXHRcdHRoaXMucGxheWVyX25hbWVzID0ge1wiLTFcIjogXCJHTVwifTtcclxuXHJcblx0XHR0aGlzLmNoYXJhY3Rlcl9zaGVldCA9IHt9O1xyXG5cdFx0dGhpcy5jaGFyYWN0ZXJfc2hlZXRzID0ge307IC8vIEdNIG9ubHkgLSB0aGUgb25lIGFib3ZlIGlzIHRoZSBwbGF5ZXIncyBjaGFyIHNoZWV0IGFuZCB0aGlzIG9uZSBhbmQgdGhlIG9uZSBiZWxvdyBhcmUgdGhlIEdNJ3MgY2hhciBzaGVldHMuXHJcblx0XHR0aGlzLmNoYXJfc2hlZXRfcGFuZWxzID0ge307XHJcblx0fVxyXG5cclxuXHRoYW5kbGVfbWVzc2FnZShlKSB7XHJcblx0XHRsZXQgb2JqID0gSlNPTi5wYXJzZShlLmRhdGEpO1xyXG5cdFx0Y29uc29sZS5sb2cob2JqKTtcclxuXHRcdGlmKG9iai5zaG93X2xvZ2luX3BhbmVsKSB7XHJcblx0XHRcdG5ldyBMb2dpblBhbmVsKHRoaXMpO1xyXG5cdFx0fVxyXG5cdFx0aWYob2JqLmJlX2dtKSB7XHJcblx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcImlzLWdtXCIpOyAvLyBiYXNpY2FsbHkgeW91IGNhbiBzdGljayB2YXJpb3VzIGNsYXNzZXMgb24gZWxlbWVudHMgdG8gbWFrZSB0aGVtIG9ubHkgdmlzaWJsZSBpZiB5b3VyZSBhIGdtLlxyXG5cdFx0fVxyXG5cdFx0aWYob2JqLmZyb3plbiAhPSBudWxsKSB7IC8vIG9ubHkgZ20gZ2V0cyB0aGlzLlxyXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZyb3plbi1jaGVja2JveFwiKS5jaGVja2VkID0gb2JqLmZyb3plbjtcclxuXHRcdH1cclxuXHRcdGlmKG9iai5hZGRfcGxheWVyKSB7XHJcblx0XHRcdGxldCBwbyA9IG9iai5hZGRfcGxheWVyO1xyXG5cdFx0XHR0aGlzLnBsYXllcl9uYW1lc1twby5pZF0gPSBwby5uYW1lO1xyXG5cdFx0XHRsZXQgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblx0XHRcdGVsZW0uY2xhc3NMaXN0LmFkZChcInBsYXllci1lbnRyeVwiKTtcclxuXHRcdFx0ZWxlbS5kYXRhc2V0LnBsYXllcm51bSA9IHBvLmlkO1xyXG5cdFx0XHRlbGVtLmlubmVySFRNTCA9IGBcclxuPGRpdiBzdHlsZT0ndGV4dC1hbGlnbjpjZW50ZXI7JHtwby5uYW1lX3N0eWxlfScgY2xhc3M9J3BsYXllci1uYW1lICR7cG8ubmFtZV9jbGFzc30nPjwvZGl2PlxyXG48ZGl2IGNsYXNzPSdnbS1vbmx5JyBzdHlsZT0nZm9udC1zaXplOjEycHg7Zm9udC1zdHlsZTppdGFsaWM7dGV4dC1hbGlnbjpjZW50ZXInPlBsYXllcjwvZGl2PlxyXG48ZGl2PlxyXG5cdDxpbnB1dCB0eXBlPSdidXR0b24nIGNsYXNzPSdwbS1idXR0b24nIHZhbHVlPSdQTSc+XHJcblx0PGlucHV0IHR5cGU9J2J1dHRvbicgY2xhc3M9J2VkaXQtY2hhci1idXR0b24gZ20tb25seScgdmFsdWU9J0VkaXQgQ2hhcmFjdGVyIFNoZWV0Jz5cclxuXHQ8aW5wdXQgdHlwZT0nYnV0dG9uJyBjbGFzcz0nc3Bvb2YtYnV0dG9uIGdtLW9ubHknIHZhbHVlPSdTcG9vZic+XHJcblx0PGxhYmVsIGNsYXNzPSdnbS1vbmx5Jz48aW5wdXQgdHlwZT0nY2hlY2tib3gnIGNsYXNzPSdtdXRlLWNoZWNrYm94Jz5NdXRlPC9sYWJlbD5cclxuPC9kaXY+XHJcbmA7XHJcblx0XHRcdGVsZW0ucXVlcnlTZWxlY3RvcignLnBsYXllci1uYW1lJykudGV4dENvbnRlbnQgPSBwby5uYW1lO1xyXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllcnNsaXN0XCIpLmFwcGVuZENoaWxkKGVsZW0pO1xyXG5cdFx0fVxyXG5cdFx0aWYob2JqLmFkZF9ucGMpIHtcclxuXHRcdFx0bGV0IHBvID0gb2JqLmFkZF9ucGM7XHJcblx0XHRcdHRoaXMucGxheWVyX25hbWVzW3BvLmlkXSA9IHBvLm5hbWU7XHJcblx0XHRcdGxldCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdFx0ZWxlbS5jbGFzc0xpc3QuYWRkKFwicGxheWVyLWVudHJ5XCIpO1xyXG5cdFx0XHRlbGVtLmRhdGFzZXQucGxheWVybnVtID0gcG8uaWQ7XHJcblx0XHRcdGVsZW0uaW5uZXJIVE1MID0gYFxyXG48ZGl2IHN0eWxlPSd0ZXh0LWFsaWduOmNlbnRlcjske3BvLm5hbWVfc3R5bGV9JyBjbGFzcz0ncGxheWVyLW5hbWUgJHtwby5uYW1lX2NsYXNzfSc+PC9kaXY+XHJcbjxkaXYgc3R5bGU9J2ZvbnQtc2l6ZToxMnB4O2ZvbnQtc3R5bGU6aXRhbGljO3RleHQtYWxpZ246Y2VudGVyJz5OUEM8L2Rpdj5cclxuPGRpdj5cclxuXHQ8aW5wdXQgdHlwZT0nYnV0dG9uJyBjbGFzcz0nc3Bvb2YtYnV0dG9uIGdtLW9ubHknIHZhbHVlPSdTcG9vZic+XHJcbjwvZGl2PlxyXG5gO1xyXG5cdFx0XHRlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXItbmFtZScpLnRleHRDb250ZW50ID0gcG8ubmFtZTtcclxuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJucGNzbGlzdFwiKS5hcHBlbmRDaGlsZChlbGVtKTtcclxuXHRcdH1cclxuXHRcdGlmKG9iai50b19jaGF0KSB7XHJcblx0XHRcdGxldCBpdGVtcyA9IG9iai50b19jaGF0O1xyXG5cdFx0XHRpZighKGl0ZW1zIGluc3RhbmNlb2YgQXJyYXkpKVxyXG5cdFx0XHRcdGl0ZW1zID0gW2l0ZW1zXTtcclxuXHRcdFx0dGhpcy5tb2RpZnlfY2hhdCgoKSA9PiB7XHJcblx0XHRcdFx0Zm9yKGxldCBpdGVtIG9mIGl0ZW1zKSB7XHJcblx0XHRcdFx0XHQvLyB3cmFwIHRoZW0gaW4gZGl2cyBhbmQgdG9zcyB0aGVtIGF0IHRoZSBlbmQgb2YgdGhlIGNoYXQgd2luZG93YFxyXG5cdFx0XHRcdFx0bGV0IG5ld2RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRcdFx0bmV3ZGl2LmlubmVySFRNTCA9IGl0ZW07XHJcblx0XHRcdFx0XHR0aGlzLmNoYXRfd2luZG93LmFwcGVuZENoaWxkKG5ld2Rpdik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdGlmKG9iai5wbGF5ZXJudW0pIHtcclxuXHRcdFx0Ly8gc2V0cyBvdXIgcGxheWVybnVtIHNvIHdlIGNhbiByZXRyaWV2ZSBvdXIgbmFtZVxyXG5cdFx0XHR0aGlzLnBsYXllcm51bSA9IG9iai5wbGF5ZXJudW07XHJcblx0XHR9XHJcblx0XHRpZihvYmouY2hhcmFjdGVyX3NoZWV0KSB7XHJcblx0XHRcdHRoaXMuY2hhcmFjdGVyX3NoZWV0ID0gb2JqLmNoYXJhY3Rlcl9zaGVldDtcclxuXHRcdFx0aWYodGhpcy5jaGFyX3NoZWV0X3BhbmVsKVxyXG5cdFx0XHRcdHRoaXMuY2hhcl9zaGVldF9wYW5lbC51cGRhdGVfZGF0YSh0aGlzLmNoYXJhY3Rlcl9zaGVldCk7XHJcblx0XHR9XHJcblx0XHRpZihvYmouY2hhcmFjdGVyX3NoZWV0cykge1xyXG5cdFx0XHRPYmplY3QuYXNzaWduKHRoaXMuY2hhcmFjdGVyX3NoZWV0cywgb2JqLmNoYXJhY3Rlcl9zaGVldHMpO1xyXG5cdFx0XHQvLyBubyBuZWVkIHRvIHVwZGF0ZSBhbnl0aGluZywgdGhlcmUncyBubyBwYW5lbHMgb3BlbiBzaW5jZSB0aGlzIGlzIG9ubHkgc2VudCBvbiBsb2dpblxyXG5cdFx0XHQvLyBhbmQgb25seSB0aGUgR00gY2FuIGNoYW5nZSB0aGUgY2hhcmFjdGVyIHNoZWV0cy5cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGhhbmRsZV9jbGljayhlKSB7XHJcblx0XHRsZXQgaW5wdXQgPSBlLnRhcmdldC5jbG9zZXN0KFwiaW5wdXRcIik7XHJcblx0XHRsZXQgcGxheWVybnVtX2VsZW0gPSBlLnRhcmdldC5jbG9zZXN0KFwiW2RhdGEtcGxheWVybnVtXVwiKTtcclxuXHRcdGxldCBwbGF5ZXJudW0gPSBwbGF5ZXJudW1fZWxlbSA/IHBsYXllcm51bV9lbGVtLmRhdGFzZXQucGxheWVybnVtIDogbnVsbDtcclxuXHRcdGlmKGlucHV0KSB7XHJcblx0XHRcdGlmKGlucHV0LmRhdGFzZXQuZGljZSkge1xyXG5cdFx0XHRcdGxldCBtYXh2YWwgPSAraW5wdXQuZGF0YXNldC5kaWNlO1xyXG5cdFx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGljZS1vdXRwdXRcIikudmFsdWUgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqbWF4dmFsKSArIDE7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoaW5wdXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG0tYnV0dG9uXCIpICYmIHBsYXllcm51bSkge1xyXG5cdFx0XHRcdG5ldyBQcm9tcHRQYW5lbChgUE0gdG8gJHt0aGlzLnBsYXllcl9uYW1lc1twbGF5ZXJudW1dfWApLnZhbHVlX3Byb21pc2UoKS50aGVuKCh2YWwpID0+IHtcclxuXHRcdFx0XHRcdGlmKCF2YWwpXHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdHRoaXMuc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoe3BtOiB7dG86IHBsYXllcm51bSwgdGV4dDogdmFsfX0pKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihpbnB1dC5jbGFzc0xpc3QuY29udGFpbnMoXCJzcG9vZi1idXR0b25cIikgJiYgcGxheWVybnVtKSB7XHJcblx0XHRcdFx0bmV3IFByb21wdFBhbmVsKGBTcG9vZmluZyAke3RoaXMucGxheWVyX25hbWVzW3BsYXllcm51bV19YCkudmFsdWVfcHJvbWlzZSgpLnRoZW4oKHZhbCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYoIXZhbClcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0dGhpcy5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7c3Bvb2Y6IHt2aWN0aW06IHBsYXllcm51bSwgdGV4dDogdmFsfX0pKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoaW5wdXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWR2YW5jZWQtc3Bvb2YtYnV0dG9uXCIpKSB7XHJcblx0XHRcdFx0bmV3IEFkdmFuY2VkU3Bvb2ZQYW5lbCh0aGlzKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihpbnB1dC5jbGFzc0xpc3QuY29udGFpbnMoXCJjaGFyLXNoZWV0LWJ1dHRvblwiKSAmJiAhdGhpcy5jaGFyX3NoZWV0X3BhbmVsKSB7XHJcblx0XHRcdFx0dGhpcy5jaGFyX3NoZWV0X3BhbmVsID0gbmV3IENoYXJhY3RlclNoZWV0UGFuZWwodGhpcywgZmFsc2UpO1xyXG5cdFx0XHRcdHRoaXMuY2hhcl9zaGVldF9wYW5lbC51cGRhdGVfZGF0YSh0aGlzLmNoYXJhY3Rlcl9zaGVldCk7XHJcblx0XHRcdFx0dGhpcy5jaGFyX3NoZWV0X3BhbmVsLnVwZGF0ZV9uYW1lKHRoaXMucGxheWVyX25hbWVzW3RoaXMucGxheWVybnVtXSk7XHJcblx0XHRcdFx0dGhpcy5jaGFyX3NoZWV0X3BhbmVsLndhaXRfdW50aWxfY2xvc2UoKS50aGVuKCgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuY2hhcl9zaGVldF9wYW5lbCA9IG51bGw7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGlucHV0LmNsYXNzTGlzdC5jb250YWlucyhcImFkZC1jaGFyLWJ1dHRvblwiKSkge1xyXG5cdFx0XHRcdG5ldyBBZGRDaGFyYWN0ZXJQYW5lbCh0aGlzKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihpbnB1dC5jbGFzc0xpc3QuY29udGFpbnMoXCJlZGl0LWNoYXItYnV0dG9uXCIpICYmIHBsYXllcm51bSAmJiAhdGhpcy5jaGFyX3NoZWV0X3BhbmVsc1twbGF5ZXJudW1dKSB7XHJcblx0XHRcdFx0dGhpcy5jaGFyX3NoZWV0X3BhbmVsc1twbGF5ZXJudW1dID0gbmV3IENoYXJhY3RlclNoZWV0UGFuZWwodGhpcywgdHJ1ZSwgcGxheWVybnVtKTtcclxuXHRcdFx0XHR0aGlzLmNoYXJfc2hlZXRfcGFuZWxzW3BsYXllcm51bV0udXBkYXRlX2RhdGEodGhpcy5jaGFyYWN0ZXJfc2hlZXRzW3BsYXllcm51bV0pO1xyXG5cdFx0XHRcdHRoaXMuY2hhcl9zaGVldF9wYW5lbHNbcGxheWVybnVtXS51cGRhdGVfbmFtZSh0aGlzLnBsYXllcl9uYW1lc1twbGF5ZXJudW1dKTtcclxuXHRcdFx0XHR0aGlzLmNoYXJfc2hlZXRfcGFuZWxzW3BsYXllcm51bV0ud2FpdF91bnRpbF9jbG9zZSgpLnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5jaGFyX3NoZWV0X3BhbmVsc1twbGF5ZXJudW1dID0gbnVsbDtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0bGV0IHBtX2xpbmsgPSBlLnRhcmdldC5jbG9zZXN0KFwiW2RhdGEtcG1dXCIpO1xyXG5cdFx0aWYocG1fbGluaykge1xyXG5cdFx0XHRuZXcgUHJvbXB0UGFuZWwoYFBNIHJlcGx5YCkudmFsdWVfcHJvbWlzZSgpLnRoZW4oKHZhbCkgPT4ge1xyXG5cdFx0XHRcdGlmKCF2YWwpXHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0dGhpcy5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7cG06IHt0bzogcG1fbGluay5kYXRhc2V0LnBtLCB0ZXh0OiB2YWx9fSkpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblx0aGFuZGxlX2NoYW5nZShlKSB7XHJcblx0XHRsZXQgaW5wdXQgPSBlLnRhcmdldC5jbG9zZXN0KFwiaW5wdXRcIik7XHJcblx0XHRsZXQgcGxheWVybnVtX2VsZW0gPSBlLnRhcmdldC5jbG9zZXN0KFwiW2RhdGEtcGxheWVybnVtXVwiKTtcclxuXHRcdGxldCBwbGF5ZXJudW0gPSBwbGF5ZXJudW1fZWxlbSA/IHBsYXllcm51bV9lbGVtLmRhdGFzZXQucGxheWVybnVtIDogbnVsbDtcclxuXHRcdGlmKGlucHV0KSB7XHJcblx0XHRcdGlmKGlucHV0LmlkID09IFwiZnJvemVuLWNoZWNrYm94XCIpIHtcclxuXHRcdFx0XHR0aGlzLnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHtmcm96ZW46ICEhaW5wdXQuY2hlY2tlZH0pKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihpbnB1dC5jbGFzc0xpc3QuY29udGFpbnMoXCJtdXRlLWNoZWNrYm94XCIpICYmIHBsYXllcm51bSkge1xyXG5cdFx0XHRcdGlmKGlucHV0LmNoZWNrZWQpXHJcblx0XHRcdFx0XHR0aGlzLnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHttdXRlX3BsYXllcjogcGxheWVybnVtfSkpO1xyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdHRoaXMuc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoe3VubXV0ZV9wbGF5ZXI6IHBsYXllcm51bX0pKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0dGV4dF9pbnB1dF9rZXlkb3duKGUpIHtcclxuXHRcdGxldCB0ZXh0X2lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWluLXRleHQtaW5wdXRcIik7XHJcblx0XHRpZihlLndoaWNoID09IDEzKSB7IC8vIGVudGVyXHJcblx0XHRcdGxldCB0ZXh0ID0gdGV4dF9pbnB1dC52YWx1ZTtcclxuXHRcdFx0dGV4dF9pbnB1dC52YWx1ZSA9IFwiXCI7XHJcblx0XHRcdHRoaXMuc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoe2NoYXQ6IHRleHR9KSk7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdG1vZGlmeV9jaGF0KGNhbGxiYWNrKSB7IC8vIHdyYXAgeW91ciBjaGF0IG1vZGlmaWNhdGlvbnMgd2l0aCB0aGlzIGZ1bmN0aW9uIHNvIHRoYXQgdGhlIHNjcm9sbCBnZXRzIHVwZGF0ZWQgcHJvcGVybHlcclxuXHRcdGxldCBkb19zY3JvbGwgPSBmYWxzZTtcclxuXHRcdGlmKE1hdGguY2VpbCh0aGlzLmNoYXRfd2luZG93LnNjcm9sbFRvcCArIHRoaXMuY2hhdF93aW5kb3cuY2xpZW50SGVpZ2h0KSA+PSBNYXRoLmZsb29yKHRoaXMuY2hhdF93aW5kb3cuc2Nyb2xsSGVpZ2h0KSkgLy8gY2hlY2sgaWYgdGhlIHRoaW5nIGlzIHNjcm9sbGVkIGFsbCB0aGUgd2F5IGRvd25cclxuXHRcdFx0ZG9fc2Nyb2xsID0gdHJ1ZTsgLy8gbWFrZXMgaXQga2VlcCBpdHNlbGYgc2Nyb2xsZWQgZG93blxyXG5cdFx0Y2FsbGJhY2soKTsgLy8gbm93IHRoZSBjaGF0IHdpbmRvdyBnZXRzIG1vZGlmaWVkXHJcblx0XHQvLyBhbmQgbm93IHdlIHNjcm9sbCBhbGwgdGhlIHdheSBkb3duIGlmIGl0IHdhcyB0aGF0IHdheSBiZWZvcmVcclxuXHRcdGlmKGRvX3Njcm9sbClcclxuXHRcdFx0dGhpcy5jaGF0X3dpbmRvdy5zY3JvbGxUb3AgPSB0aGlzLmNoYXRfd2luZG93LnNjcm9sbEhlaWdodCAtIHRoaXMuY2hhdF93aW5kb3cuY2xpZW50SGVpZ2h0O1xyXG5cdH1cclxufVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuXHQvLyBhbHJpZ2h0eSBsZXQncyBjb25uZWN0XHJcblx0d2luZG93LmNsaWVudCA9IG5ldyBDbGllbnQoKTtcclxufSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuY29uc3QgUGFuZWwgPSByZXF1aXJlKCcuL3BhbmVsLmpzJyk7XHJcbmNvbnN0IGNoYXJhY3Rlcl90ZW1wbGF0ZXMgPSByZXF1aXJlKCcuLi8uLi9kYXRhL2NoYXJhY3Rlcl90ZW1wbGF0ZXMuanNvbicpXHJcblxyXG5jbGFzcyBBZGRDaGFyYWN0ZXJQYW5lbCBleHRlbmRzIFBhbmVsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNsaWVudCkge1xyXG4gICAgICAgIHN1cGVyKHsgd2lkdGg6IDQwMCwgaGVpZ2h0OiAxNDAsIHRpdGxlOiBcIkFkZCBDaGFyYWN0ZXJcIiB9KTtcclxuICAgICAgICB0aGlzLmNsaWVudCA9IGNsaWVudDtcclxuICAgICAgICB0aGlzLmNvbnRlbnRfb2JqLmlubmVySFRNTCA9IGBcclxuPGRpdj48c2VsZWN0IGNsYXNzPSdjaGFyc2hlZXRfbGlzdCc+PG9wdGlvbiB2YWx1ZT0nYWxsJyBzZWxlY3RlZD5BTEw8L29wdGlvbj48L3NlbGVjdD48L2Rpdj5cclxuPGlucHV0IHR5cGU9J2J1dHRvbicgY2xhc3M9J2NvbmZpcm0tYnV0dG9uJyB2YWx1ZT0nTG9hZCc+XHJcbmA7XHJcbiAgICAgICAgdGhpcy5wb3B1bGF0ZV9saXN0KCk7XHJcbiAgICAgICAgdGhpcy5yZXR1cm5fdmFsID0gbnVsbDtcclxuICAgICAgICB0aGlzLiQoJy5jb25maXJtLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHBvcHVsYXRlX2xpc3QoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyYWN0ZXJfdGVtcGxhdGVzLmNoYXJhY3RlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICBlbGVtLnZhbHVlID0gY2hhcmFjdGVyX3RlbXBsYXRlcy5jaGFyYWN0ZXJzW2ldLm5hbWU7XHJcbiAgICAgICAgICAgIGVsZW0udGV4dENvbnRlbnQgPSBlbGVtLnZhbHVlOyAvL1RPRE86IE1ha2UgdGhpcyBjb2RlIHN1Y2sgbGVzcz9cclxuICAgICAgICAgICAgdGhpcy4kKCcuY2hhcnNoZWV0X2xpc3QnKS5hcHBlbmRDaGlsZChlbGVtKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2VuZCgpIHtcclxuICAgICAgICBsZXQgY2hhcmFjdGVyID0gdGhpcy4kKCcuY2hhcnNoZWV0X2xpc3QnKS52YWx1ZTtcclxuICAgICAgICBpZiAoY2hhcmFjdGVyID09ICdhbGwnKSAvL0knbSBzb3JyeSAvL1RPRE86IE1ha2UgdGhpcyBjb2RlIHN1Y2sgbGVzcz9cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyYWN0ZXJfdGVtcGxhdGVzLmNoYXJhY3RlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBhbGxfY2hhcnMgPSBjaGFyYWN0ZXJfdGVtcGxhdGVzLmNoYXJhY3RlcnNbaV0ubmFtZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50LnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHthZGRfY2hhcmFjdGVyOiBhbGxfY2hhcnN9KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMuY2xpZW50LnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHthZGRfY2hhcmFjdGVyOiBjaGFyYWN0ZXJ9KSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQWRkQ2hhcmFjdGVyUGFuZWw7IiwiJ3VzZSBzdHJpY3QnO1xyXG5jb25zdCBQYW5lbCA9IHJlcXVpcmUoJy4vcGFuZWwuanMnKTtcclxuXHJcbmNsYXNzIEFkdmFuY2VkU3Bvb2ZQYW5lbCBleHRlbmRzIFBhbmVsIHtcclxuXHRjb25zdHJ1Y3RvcihjbGllbnQpIHtcclxuXHRcdHN1cGVyKHt3aWR0aDogNDAwLCBoZWlnaHQ6IDE0MCwgdGl0bGU6IFwiQWR2YW5jZWQgU3Bvb2ZpbmdcIn0pO1xyXG5cdFx0dGhpcy5jbGllbnQgPSBjbGllbnQ7XHJcblx0XHR0aGlzLmNvbnRlbnRfb2JqLmlubmVySFRNTCA9IGBcclxuPGRpdj48c2VsZWN0IGNsYXNzPSdzcG9vZl9mcm9tJz48L3NlbGVjdD4gLT4gPHNlbGVjdCBjbGFzcz0nc3Bvb2ZfdG8nPjxvcHRpb24gdmFsdWU9Jycgc2VsZWN0ZWQ+QUxMPC9vcHRpb24+PC9zZWxlY3Q+PC9kaXY+XHJcbjxpbnB1dCBzdHlsZT0nd2lkdGg6OTAlJyB0eXBlPSd0ZXh0JyBjbGFzcz0ncHJvbXB0LXZhbHVlJz48L2lucHV0PlxyXG48aW5wdXQgdHlwZT0nYnV0dG9uJyBjbGFzcz0nY29uZmlybS1idXR0b24nIHZhbHVlPSdTZW5kJz5cclxuYDtcclxuXHRcdGZvcihsZXQgcGxheWVybnVtIG9mIE9iamVjdC5rZXlzKGNsaWVudC5wbGF5ZXJfbmFtZXMpKSB7XHJcblx0XHRcdGlmKHBsYXllcm51bSA9PSBcIi0xXCIpXHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdGxldCBwbGF5ZXJfbmFtZSA9IGNsaWVudC5wbGF5ZXJfbmFtZXNbcGxheWVybnVtXTtcclxuXHRcdFx0bGV0IGVsZW1hID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuXHRcdFx0ZWxlbWEudmFsdWUgPSBwbGF5ZXJudW07XHJcblx0XHRcdGVsZW1hLnRleHRDb250ZW50ID0gcGxheWVyX25hbWU7XHJcblx0XHRcdGxldCBlbGVtYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcblx0XHRcdGVsZW1iLnZhbHVlID0gcGxheWVybnVtO1xyXG5cdFx0XHRlbGVtYi50ZXh0Q29udGVudCA9IHBsYXllcl9uYW1lO1xyXG5cdFx0XHR0aGlzLiQoJy5zcG9vZl9mcm9tJykuYXBwZW5kQ2hpbGQoZWxlbWEpO1xyXG5cdFx0XHR0aGlzLiQoJy5zcG9vZl90bycpLmFwcGVuZENoaWxkKGVsZW1iKTtcclxuXHRcdH1cclxuXHRcdHRoaXMucmV0dXJuX3ZhbCA9IG51bGw7XHJcblx0XHR0aGlzLiQoJy5jb25maXJtLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuc2VuZCgpO1xyXG5cdFx0fSk7XHJcblx0XHR0aGlzLiQoJy5wcm9tcHQtdmFsdWUnKS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xyXG5cdFx0XHRpZihlLndoaWNoID09IDEzKSB7IC8vIGVudGVyXHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdHRoaXMuc2VuZCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHRoaXMuJCgnLnByb21wdC12YWx1ZScpLmZvY3VzKCk7XHJcblx0fVxyXG5cclxuXHRzZW5kKCkge1xyXG5cdFx0bGV0IHRleHQgPSB0aGlzLiQoJy5wcm9tcHQtdmFsdWUnKS52YWx1ZTtcclxuXHRcdGxldCBmcm9tID0gdGhpcy4kKCcuc3Bvb2ZfZnJvbScpLnZhbHVlO1xyXG5cdFx0bGV0IHRvID0gdGhpcy4kKCcuc3Bvb2ZfdG8nKS52YWx1ZTtcclxuXHRcdGZyb20gPSBmcm9tID09IFwiXCIgPyBudWxsIDogK2Zyb207XHJcblx0XHR0byA9IHRvID09IFwiXCIgPyBudWxsIDogK3RvO1xyXG5cdFx0dGhpcy5jbGllbnQuc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoe3Nwb29mOiB7dmljdGltOiBmcm9tLCBwbV90bzogdG8sIHRleHQ6IHRleHR9fSkpO1xyXG5cdFx0dGhpcy4kKCcucHJvbXB0LXZhbHVlJykudmFsdWUgPSBcIlwiO1xyXG5cdH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBBZHZhbmNlZFNwb29mUGFuZWw7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuY29uc3QgUGFuZWwgPSByZXF1aXJlKCcuL3BhbmVsLmpzJyk7XHJcblxyXG5jbGFzcyBDaGFyYWN0ZXJTaGVldFBhbmVsIGV4dGVuZHMgUGFuZWwge1xyXG5cdGNvbnN0cnVjdG9yKGNsaWVudCwgZWRpdF9tb2RlID0gdHJ1ZSwgcGxheWVybnVtKSB7XHJcblx0XHRzdXBlcih7d2lkdGg6IDc1MCwgaGVpZ2h0OiA5MDAsIHRpdGxlOlwiQ2hhcmFjdGVyIFNoZWV0XCJ9KTtcclxuXHRcdHRoaXMuY2xpZW50ID0gY2xpZW50O1xyXG5cdFx0dGhpcy5wbGF5ZXJudW0gPSBwbGF5ZXJudW07XHJcblx0XHR0aGlzLmNvbnRlbnRfb2JqLmlubmVySFRNTCA9YFxyXG48ZGl2PjxpbnB1dCB0eXBlPSdidXR0b24nIGNsYXNzPSdzYXZlLWJ1dHRvbicgdmFsdWUgPSBcIlNhdmUgYW5kIFNlbmQgU2hlZXRcIj48L2Rpdj5cclxuPGgxIGNsYXNzPVwiY2hhcm5hbWVcIj5HZW4tUi1JQ0MtMTwvaDE+XHJcbjxkaXYgY2xhc3M9J2xlZnQtcGFydCc+XHJcblx0PGRpdiBjbGFzcz0nbWFyZ2lucyc+PGI+U2VydmljZSBHcm91cDogPC9iPjxzcGFuIGRhdGEtY3NmaWVsZD1cInNlcnZpY2VfZ3JvdXBcIj48L3NwYW4+PC9kaXY+XHJcblx0PGRpdiBjbGFzcz0nbWFyZ2lucyc+PGI+RmlybTogPC9iPjxzcGFuIGRhdGEtY3NmaWVsZD1cImZpcm1cIj48L3NwYW4+PC9kaXY+XHJcblx0PGRpdiBjbGFzcz0nbWFyZ2lucyc+PGI+R2VuZGVyOiA8L2I+PHNwYW4gZGF0YS1jc2ZpZWxkPVwiZ2VuZGVyXCI+PC9zcGFuPjwvZGl2PlxyXG5cdDxkaXYgY2xhc3M9J21hcmdpbnMnPjxiPlRpY3M6IDwvYj48c3BhbiBkYXRhLWNzZmllbGQ9XCJ0aWNzXCIgY2xhc3M9J2Z1bGx3aWR0aCc+PC9zcGFuPjwvZGl2PlxyXG5cdDx0YWJsZSBjbGFzcz0nbWFyZ2lucyc+XHJcblx0XHQ8dHI+XHJcblx0XHRcdDx0ZD48Yj5NQkQ6IDwvYj48L3RkPlxyXG5cdFx0XHQ8dGQ+PGxhYmVsPjxpbnB1dCB0eXBlPSdjaGVja2JveCcgZGF0YS1jc2ZpZWxkPVwibWJkMVwiPlRlYW0gTGVhZGVyPC9sYWJlbD48L3RkPlxyXG5cdFx0XHQ8dGQ+PGxhYmVsPjxpbnB1dCB0eXBlPSdjaGVja2JveCcgZGF0YS1jc2ZpZWxkPVwibWJkMlwiPkxveWFsdHkgT2ZmaWNlcjwvbGFiZWw+PC90ZD5cclxuXHRcdFx0PHRkPjxsYWJlbD48aW5wdXQgdHlwZT0nY2hlY2tib3gnIGRhdGEtY3NmaWVsZD1cIm1iZDNcIj5IeWdpZW5lIE9mZmljZXI8L2xhYmVsPjwvdGQ+XHJcblx0XHRcdDx0ZD48bGFiZWw+PGlucHV0IHR5cGU9J2NoZWNrYm94JyBkYXRhLWNzZmllbGQ9XCJtYmQ0XCI+QWRzICYgQnJhbmRpbmc8L2xhYmVsPjwvdGQ+XHJcblx0XHQ8L3RyPlxyXG5cdFx0PHRyPlxyXG5cdFx0XHQ8dGQ+PC90ZD5cclxuXHRcdFx0PHRkPjxsYWJlbD48aW5wdXQgdHlwZT0nY2hlY2tib3gnIGRhdGEtY3NmaWVsZD1cIm1iZDVcIj5DJlJPPC9sYWJlbD48L3RkPlxyXG5cdFx0XHQ8dGQ+PGxhYmVsPjxpbnB1dCB0eXBlPSdjaGVja2JveCcgZGF0YS1jc2ZpZWxkPVwibWJkNlwiPkVxdWlwbWVudCBHdXk8L2xhYmVsPjwvdGQ+XHJcblx0XHRcdDx0ZD48bGFiZWw+PGlucHV0IHR5cGU9J2NoZWNrYm94JyBkYXRhLWNzZmllbGQ9XCJtYmQ3XCI+SGFwcGluZXNzIE9mZmljZXI8L2xhYmVsPjwvdGQ+XHJcblx0XHRcdDx0ZD48bGFiZWw+PGlucHV0IHR5cGU9J2NoZWNrYm94JyBkYXRhLWNzZmllbGQ9XCJtYmQ4XCI+QWdlbnQgUHJvdm9jYXRldXI8L2xhYmVsPjwvdGQ+XHJcblx0XHQ8L3RyPlxyXG5cdFx0PHRyPlxyXG5cdFx0XHQ8dGQ+PC90ZD5cclxuXHRcdFx0PHRkPjxsYWJlbD48aW5wdXQgdHlwZT0nY2hlY2tib3gnIGRhdGEtY3NmaWVsZD1cIm1iZDlcIj5BbGVydG5lc3MgT2ZmaWNlcjwvbGFiZWw+PC90ZD5cclxuXHRcdFx0PHRkPjxsYWJlbD48aW5wdXQgdHlwZT0nY2hlY2tib3gnIGRhdGEtY3NmaWVsZD1cIm1iZDEwXCI+RmluYW5jaWFsIE9mZmljZXI8L2xhYmVsPjwvdGQ+XHJcblx0XHRcdDx0ZD48bGFiZWw+PGlucHV0IHR5cGU9J2NoZWNrYm94JyBkYXRhLWNzZmllbGQ9XCJtYmQxMVwiPk1lZGljYWwgT2ZmaWNlcjwvbGFiZWw+PC90ZD5cclxuXHRcdFx0PHRkPjxsYWJlbD48aW5wdXQgdHlwZT0nY2hlY2tib3gnIGRhdGEtY3NmaWVsZD1cIm1iZDEyXCI+UHVibGljIFJlbGF0aW9uczwvbGFiZWw+PC90ZD5cclxuXHRcdDwvdHI+XHJcblx0XHQ8dHI+XHJcblx0XHRcdDx0ZD48L3RkPlxyXG5cdFx0XHQ8dGQgY29sc3Bhbj0zPjxpbnB1dCB0eXBlPSdjaGVja2JveCcgZGF0YS1jc2ZpZWxkPVwibWJkX2N1c3RvbVwiPjxzcGFuIGRhdGEtY3NmaWVsZD1cIm1iZF9jdXN0b21fbmFtZVwiPjwvc3Bhbj48L3RkPlxyXG5cdFx0PC90cj5cclxuXHQ8L3RhYmxlPlxyXG48L2Rpdj5cclxuPHRhYmxlIGNsYXNzPSdtYXJnaW5zJz5cclxuXHQ8dHI+PHRkIGNvbHNwYW49Mz48aDI+QWN0aW9uIFNraWxsczwvaDI+PC90ZD48L3RyPlxyXG5cdDx0cj5cclxuXHRcdDx0ZD5cclxuXHRcdFx0PGRpdiBjbGFzcz0nc2tpbGwtaGVhZGVyJz5NYW5hZ2VtZW50PHNwYW4gZGF0YS1jc2ZpZWxkPVwic2tpbGwtbWdtdFwiPjwvc3Bhbj48L2Rpdj5cclxuXHRcdFx0PHRhYmxlIGNsYXNzPSdza2lsbC1lbnRyeSc+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5Cb290bGlja2luZzwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtYm9vdGxpY2tpbmdcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5DaHV0enBhaDwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtY2h1dHpwYWhcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5Db24gR2FtZXM8L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLWNvbmdhbWVzXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCc+SHlnaWVuZTwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtaHlnaWVuZVwiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnPkludGVycm9nYXRpb248L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLWludGVycm9nYXRpb25cIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5JbnRpbWlkYXRpb248L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLWludGltaWRhdGlvblwiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnPk1veGllPC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1tb3hpZVwiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnPk9yYXRvcnk8L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLW9yYXRvcnlcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0JyBkYXRhLWNzZmllbGQ9XCJza2lsbC1tZ210LWNuMVwiPjwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtbWdtdC1jdjFcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0JyBkYXRhLWNzZmllbGQ9XCJza2lsbC1tZ210LWNuMlwiPjwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtbWdtdC1jdjJcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0JyBkYXRhLWNzZmllbGQ9XCJza2lsbC1tZ210LWNuM1wiPjwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtbWdtdC1jdjNcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0JyBkYXRhLWNzZmllbGQ9XCJza2lsbC1tZ210LWNuNFwiPjwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtbWdtdC1jdjRcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdDwvdGFibGU+XHJcblx0XHQ8L3RkPlxyXG5cdFx0PHRkPlxyXG5cdFx0XHQ8ZGl2IGNsYXNzPSdza2lsbC1oZWFkZXInPlN0ZWFsdGg8c3BhbiBkYXRhLWNzZmllbGQ9XCJza2lsbC1zdGVhbHRoXCI+PC9kaXY+XHJcblx0XHRcdDx0YWJsZSBjbGFzcz0nc2tpbGwtZW50cnknPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCc+Q29uY2VhbG1lbnQ8L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLWNvbmNlYWxtZW50XCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCc+RGlzZ3Vpc2U8L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLWRpc2d1aXNlXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCc+SGlnaCBBbGVydDwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtaGlnaGFsZXJ0XCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCc+U2VjdXJpdHkgU3lzdGVtczwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtc2VjdXJpdHlzeXN0ZW1zXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCc+U2hhZG93aW5nPC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1zaGFkb3dpbmdcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5TbGVpZ2h0IG9mIEhhbmQ8L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLXNsZWlnaHRvZmhhbmRcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5TbmVha2luZzwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtc25lYWtpbmdcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5TdXJ2ZWlsbGFuY2U8L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLXN1cnZlaWxsYW5jZVwiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnIGRhdGEtY3NmaWVsZD1cInNraWxsLXN0ZWFsdGgtY24xXCI+PC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1zdGVhbHRoLWN2MVwiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnIGRhdGEtY3NmaWVsZD1cInNraWxsLXN0ZWFsdGgtY24yXCI+PC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1zdGVhbHRoLWN2MlwiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnIGRhdGEtY3NmaWVsZD1cInNraWxsLXN0ZWFsdGgtY24zXCI+PC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1zdGVhbHRoLWN2M1wiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnIGRhdGEtY3NmaWVsZD1cInNraWxsLXN0ZWFsdGgtY240XCI+PC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1zdGVhbHRoLWN2NFwiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0PC90YWJsZT5cclxuXHRcdDwvdGQ+XHJcblx0XHQ8dGQ+XHJcblx0XHRcdDxkaXYgY2xhc3M9J3NraWxsLWhlYWRlcic+VmlvbGVuY2U8c3BhbiBkYXRhLWNzZmllbGQ9XCJza2lsbC12aW9sZW5jZVwiPjwvZGl2PlxyXG5cdFx0XHQ8dGFibGUgY2xhc3M9J3NraWxsLWVudHJ5Jz5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnPkFnaWxpdHk8L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLWFnaWxpdHlcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5FbmVyZ3kgV2VhcG9uczwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtZW5lcmd5d2Vwc1wiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnPkRlbW9saXRpb248L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLWRlbW9saXRpb25cIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5GaWVsZCBXZWFwb25zPC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1maWVsZHdlcHNcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5GaW5lIE1hbmlwdWxhdGlvbjwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtZmluZW1hbmlwXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCc+SGFuZCBXZWFwb25zPC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1oYW5kd2Vwc1wiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnPlByb2plY3RpbGUgV2VhcG9uczwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtcHJvandlcHNcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5UaHJvd24gV2VhcG9uczwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtdGhyb3dud2Vwc1wiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnPlVuYXJtZWQgQ29tYmF0PC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC11bmFybWVkY29tYmF0XCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCc+VmVoaWN1bGFyIENvbWJhdDwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtdmVoaWN1bGFyY29tYmF0XCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCcgZGF0YS1jc2ZpZWxkPVwic2tpbGwtdmlvbGVuY2UtY24xXCI+PC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC12aW9sZW5jZS1jdjFcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0JyBkYXRhLWNzZmllbGQ9XCJza2lsbC12aW9sZW5jZS1jbjJcIj48L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLXZpb2xlbmNlLWN2MlwiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0PC90YWJsZT5cclxuXHRcdDwvdGQ+XHJcblx0PC90cj5cclxuXHQ8dHI+PHRkIGNvbHNwYW49Mz48aDI+S25vd2xlZGdlIFNraWxsczwvaDI+PC90ZD48L3RyPlxyXG5cdDx0cj5cclxuXHRcdDx0ZD5cclxuXHRcdFx0PGRpdiBjbGFzcz0nc2tpbGwtaGVhZGVyJz5IYXJkd2FyZTxzcGFuIGRhdGEtY3NmaWVsZD1cInNraWxsLWhhcmR3YXJlXCI+PC9zcGFuPjwvZGl2PlxyXG5cdFx0XHQ8dGFibGUgY2xhc3M9J3NraWxsLWVudHJ5Jz5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnPkJvdCBPcHMgJiBNYWludDwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtYm90bWFpbnRcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5DaGVtaWNhbCBFbmcuPC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1jaGVtZW5nXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCc+RWxlY3RvbmljIEVuZy48L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLWVsZWN0cmVuZ1wiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnPkhhYml0YXQgRW5nLjwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtaGFiZW5nXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCc+TWVjaGFuaWNhbCBFbmcuPC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1tZWNoZW5nXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCc+TnVjbGVhciBFbmcuPC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1udWtlZW5nXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCc+VmVoaWNsZSBPcHMgJiBNYWludC48L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLXZlaGljbGVtYWludFwiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnPldlYXBvbiAmIEFybW9yIE1haW50LjwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtd2VhcG9ubWFpbnRcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0JyBkYXRhLWNzZmllbGQ9XCJza2lsbC1oYXJkd2FyZS1jbjFcIj48L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLWhhcmR3YXJlLWN2MVwiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnIGRhdGEtY3NmaWVsZD1cInNraWxsLWhhcmR3YXJlLWNuMlwiPjwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtaGFyZHdhcmUtY3YyXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCcgZGF0YS1jc2ZpZWxkPVwic2tpbGwtaGFyZHdhcmUtY24zXCI+PC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1oYXJkd2FyZS1jdjNcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0JyBkYXRhLWNzZmllbGQ9XCJza2lsbC1oYXJkd2FyZS1jbjRcIj48L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLWhhcmR3YXJlLWN2NFwiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0PC90YWJsZT5cclxuXHRcdDwvdGQ+XHJcblx0XHQ8dGQ+XHJcblx0XHRcdDxkaXYgY2xhc3M9J3NraWxsLWhlYWRlcic+U29mdHdhcmU8c3BhbiBkYXRhLWNzZmllbGQ9XCJza2lsbC1zb2Z0d2FyZVwiPjwvc3Bhbj48L2Rpdj5cclxuXHRcdFx0PHRhYmxlIGNsYXNzPSdza2lsbC1lbnRyeSc+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5Cb3QgUHJvZ3JhbW1pbmc8L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLWJvdGNvZGVcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5DLUJheTwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtY2JheVwiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnPkRhdGEgQW5hbHlzaXM8L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLWRhdGFhbmFseXNpc1wiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnPkRhdGEgU2VhcmNoPC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1kYXRhc2VhcmNoXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCc+RmluYW5jaWFsIFN5c3RlbXM8L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLWZpbmFuY2lhbHN5c3RlbXNcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5IYWNraW5nPC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1oYWNraW5nXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCc+T3BlcmF0aW5nIFN5c3RlbXM8L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLW9zZXNcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5WZWhpY2xlIFByb2dyYW1taW5nPC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC12ZWhpY2xlY29kZVwiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnIGRhdGEtY3NmaWVsZD1cInNraWxsLXNvZnR3YXJlLWNuMVwiPjwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtc29mdHdhcmUtY3YxXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCcgZGF0YS1jc2ZpZWxkPVwic2tpbGwtc29mdHdhcmUtY24yXCI+PC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1zb2Z0d2FyZS1jdjJcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0JyBkYXRhLWNzZmllbGQ9XCJza2lsbC1zb2Z0d2FyZS1jbjNcIj48L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLXNvZnR3YXJlLWN2M1wiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnIGRhdGEtY3NmaWVsZD1cInNraWxsLXNvZnR3YXJlLWNuNFwiPjwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtc29mdHdhcmUtY3Y0XCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHQ8L3RhYmxlPlxyXG5cdFx0PC90ZD5cclxuXHRcdDx0ZD5cclxuXHRcdFx0PGRpdiBjbGFzcz0nc2tpbGwtaGVhZGVyJz5XZXR3YXJlPHNwYW4gZGF0YS1jc2ZpZWxkPVwic2tpbGwtd2V0d2FyZVwiPjwvc3Bhbj48L2Rpdj5cclxuXHRcdFx0PHRhYmxlIGNsYXNzPSdza2lsbC1lbnRyeSc+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5CaW9zY2llbmNlczwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtYmlvc2NpZW5jZXNcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5CaW93ZWFwb25zPC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1iaW93ZXBzXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCc+Q2xvbmluZzwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtY2xvbmluZ1wiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnPk1lZGljYWw8L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLW1lZGljYWxcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5PdXRkb29yIExpZmU8L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLW91dGRvb3JsaWZlXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCc+UGhhcm1hdGhlcmFweTwvdGQ+XHJcblx0XHRcdFx0XHQ8dGQgZGF0YS1jc2ZpZWxkPVwic2tpbGwtcGhhcm1hdGhlcmFweVwiPjwvdGQ+XHJcblx0XHRcdFx0PC90cj5cclxuXHRcdFx0XHQ8dHI+XHJcblx0XHRcdFx0XHQ8dGQgY2xhc3M9J3JpZ2h0LXBhcnQnPlBzeWNob3RoZXJhcHk8L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLXBzeWNob3RoZXJhcHlcIj48L3RkPlxyXG5cdFx0XHRcdDwvdHI+XHJcblx0XHRcdFx0PHRyPlxyXG5cdFx0XHRcdFx0PHRkIGNsYXNzPSdyaWdodC1wYXJ0Jz5TdWdnZXN0aW9uPC90ZD5cclxuXHRcdFx0XHRcdDx0ZCBkYXRhLWNzZmllbGQ9XCJza2lsbC1zdWdnZXN0aW9uXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCcgZGF0YS1jc2ZpZWxkPVwic2tpbGwtd2V0d2FyZS1jbjFcIj48L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLXdldHdhcmUtY3YxXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCcgZGF0YS1jc2ZpZWxkPVwic2tpbGwtd2V0d2FyZS1jbjJcIj48L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLXdldHdhcmUtY3YyXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCcgZGF0YS1jc2ZpZWxkPVwic2tpbGwtd2V0d2FyZS1jbjNcIj48L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLXdldHdhcmUtY3YzXCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHRcdDx0cj5cclxuXHRcdFx0XHRcdDx0ZCBjbGFzcz0ncmlnaHQtcGFydCcgZGF0YS1jc2ZpZWxkPVwic2tpbGwtd2V0d2FyZS1jbjRcIj48L3RkPlxyXG5cdFx0XHRcdFx0PHRkIGRhdGEtY3NmaWVsZD1cInNraWxsLXdldHdhcmUtY3Y0XCI+PC90ZD5cclxuXHRcdFx0XHQ8L3RyPlxyXG5cdFx0XHQ8L3RkPlxyXG5cdFx0PC90YWJsZT5cclxuXHQ8L3RyPlxyXG48L3RhYmxlPlxyXG5gO1xyXG5cdFx0Zm9yKGxldCBlbGVtIG9mIHRoaXMuJCQoJ1tkYXRhLWNzZmllbGRdJykpIHtcclxuXHRcdFx0aWYoZWxlbS50YWdOYW1lID09IFwiSU5QVVRcIikge1xyXG5cdFx0XHRcdGlmKGVsZW0udHlwZSA9PSBcImNoZWNrYm94XCIpIHtcclxuXHRcdFx0XHRcdGlmKCFlZGl0X21vZGUpXHJcblx0XHRcdFx0XHRcdGVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKT0+e2UucHJldmVudERlZmF1bHQoKTsgcmV0dXJuIGZhbHNlO30pOyAvLyBwcmV2ZW50IGNsaWNrIGV2ZW50cy4gVGhlIGNoZWNrYm94IGlzIG5lYXJseSB1bnJlYWRhYmxlIGlmIGl0J3MgZ3JleSwgc28gZG9pbmcgdGhpcyBpbnN0ZWFkXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGVsZW0ucmVhZG9ubHkgPSAhZWRpdF9tb2RlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRlbGVtLmNvbnRlbnRFZGl0YWJsZSA9IGVkaXRfbW9kZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmKGVkaXRfbW9kZSkge1xyXG5cdFx0XHR0aGlzLiQoJy5zYXZlLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHRcdFx0bGV0IGRhdGEgPSB0aGlzLmdldF9kYXRhKCk7XHJcblx0XHRcdFx0Y2xpZW50LnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHt1cGRhdGVfY2hhcmFjdGVyX3NoZWV0OiB7Zm9yOiB0aGlzLnBsYXllcm51bSwgZGF0YX19KSk7XHJcblx0XHRcdFx0dGhpcy5jbGllbnQuY2hhcmFjdGVyX3NoZWV0c1t0aGlzLnBsYXllcm51bV0gPSBkYXRhO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuJCgnLnNhdmUtYnV0dG9uJykuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiOyAvLyByZWUgZ2V0IHJpZCBvZiB0aGF0IGJ1dHRvblxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0dXBkYXRlX25hbWUobmFtZSkge1xyXG5cdFx0dGhpcy4kKCcuY2hhcm5hbWUnKS50ZXh0Q29udGVudCA9IG5hbWU7XHJcblx0fVxyXG5cdHVwZGF0ZV9kYXRhKGRhdGEpIHtcclxuXHRcdGlmKCFkYXRhKVxyXG5cdFx0XHRyZXR1cm47IC8vIG9vaCBpdCdzIGJsYW5rLlxyXG5cdFx0Zm9yKGxldCBlbGVtIG9mIHRoaXMuJCQoJ1tkYXRhLWNzZmllbGRdJykpIHtcclxuXHRcdFx0bGV0IGtleSA9IGVsZW0uZGF0YXNldC5jc2ZpZWxkO1xyXG5cdFx0XHRpZihlbGVtLnRhZ05hbWUgPT0gXCJJTlBVVFwiKSB7XHJcblx0XHRcdFx0aWYoZWxlbS50eXBlID09IFwiY2hlY2tib3hcIikgeyAvL2NoZWNrYm94ZXMgdXNlIGNoZWNrZWQgaW5zdGVhZCBvZiB2YWx1ZVxyXG5cdFx0XHRcdFx0ZWxlbS5jaGVja2VkID0gZGF0YVtrZXldO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRlbGVtLnZhbHVlID0gc3RyaW5nX3dyYXBwZXIoZGF0YVtrZXldKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZWxlbS5pbm5lckhUTUwgPSBzdHJpbmdfd3JhcHBlcihkYXRhW2tleV0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdGdldF9kYXRhKCkgeyAvLyBsaXRlcmFsbHkgdGhlIHNhbWUgYXMgdXBkYXRlX2RhdGEgYnV0IHRoZSBhc3NpZ25tZW50cyBhcmUgc3dhcHBlZC5cclxuXHRcdGxldCBkYXRhID0ge307XHJcblx0XHRmb3IobGV0IGVsZW0gb2YgdGhpcy4kJCgnW2RhdGEtY3NmaWVsZF0nKSkge1xyXG5cdFx0XHRsZXQga2V5ID0gZWxlbS5kYXRhc2V0LmNzZmllbGQ7XHJcblx0XHRcdGlmKGVsZW0udGFnTmFtZSA9PSBcIklOUFVUXCIpIHtcclxuXHRcdFx0XHRpZihlbGVtLnR5cGUgPT0gXCJjaGVja2JveFwiKSB7XHJcblx0XHRcdFx0XHRkYXRhW2tleV0gPSBlbGVtLmNoZWNrZWQ7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGRhdGFba2V5XSA9IGVsZW0udmFsdWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGRhdGFba2V5XSA9IGVsZW0uaW5uZXJIVE1MO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZGF0YTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0cmluZ193cmFwcGVyKG9iaikgeyAvLyBwcmV2ZW50cyB0aGluZ3MgbGlrZSBcInVuZGVmaW5lZFwiIGFuZCBcIm51bGxcIiBzaG93aW5nIHVwLlxyXG5cdGlmKG9iaiA9PSBudWxsKVxyXG5cdFx0cmV0dXJuIFwiXCI7XHJcblx0ZWxzZVxyXG5cdFx0cmV0dXJuIFwiXCIrb2JqO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IENoYXJhY3RlclNoZWV0UGFuZWw7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuY29uc3QgUGFuZWwgPSByZXF1aXJlKCcuL3BhbmVsLmpzJyk7XHJcblxyXG5jbGFzcyBMb2dpblBhbmVsIGV4dGVuZHMgUGFuZWwge1xyXG5cdGNvbnN0cnVjdG9yKGNsaWVudCkge1xyXG5cdFx0c3VwZXIoe3dpZHRoOiAyNDAsIGhlaWdodDogMjg4LCB0aXRsZTogXCJMb2dpblwiLCBjYW5fY2xvc2U6IGZhbHNlfSk7XHJcblx0XHR0aGlzLmNsaWVudCA9IGNsaWVudDtcclxuXHRcdHRoaXMuY29udGVudF9vYmouaW5uZXJIVE1MID0gYFxyXG48Zm9ybT5cclxuPGRpdiBzdHlsZT0nZGlzcGxheTppbmxpbmUtYmxvY2s7dGV4dC1hbGlnbjpsZWZ0Jz5cclxuXHQ8ZGl2IGNsYXNzPSdhdmFpbGFibGVfcGxheWVycyc+PC9kaXY+XHJcblx0PGxhYmVsPjxpbnB1dCB0eXBlPSdyYWRpbycgY2xhc3M9J29ic2VydmUtY2hlY2tib3gnIG5hbWU9J2xvZ2luLXR5cGUnIHZhbHVlPSdvYnNlcnZlJyBjaGVja2VkPk9ic2VydmU8L2xhYmVsPlxyXG48L2Rpdj48YnI+PC9mb3JtPlxyXG48aW5wdXQgdHlwZT0ncGFzc3dvcmQnIGNsYXNzPSdwYXNzd29yZC1maWVsZCcgcGxhY2Vob2xkZXI9XCJQYXNzd29yZCAoZGVmYXVsdCBpcyAnYXNkZicpXCIgZGlzYWJsZWQ+PGJyPlxyXG48ZGl2IHN0eWxlPSdjb2xvcjpyZWQnIGNsYXNzPSdsb2dpbi1mYWlsLXJlYXNvbic+PC9kaXY+XHJcbjxpbnB1dCB0eXBlPSdidXR0b24nIGNsYXNzPSdsb2dpbi1idXR0b24nIHZhbHVlPSdMb2dpbic+PC9pbnB1dD5cclxuYDtcclxuXHRcdHRoaXMuJCgnLmxvZ2luLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHRcdGxldCBzZWxlY3RlZF9lbGVtID0gdGhpcy4kKCdpbnB1dDpjaGVja2VkJyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKHNlbGVjdGVkX2VsZW0pO1xyXG5cdFx0XHRpZihzZWxlY3RlZF9lbGVtLmRhdGFzZXQucGxheWVybnVtKSB7XHJcblx0XHRcdFx0bGV0IHNlbF9wbGF5ZXIgPSArc2VsZWN0ZWRfZWxlbS5kYXRhc2V0LnBsYXllcm51bTtcclxuXHRcdFx0XHRsZXQgcGFzc3dvcmQgPSB0aGlzLiQoJy5wYXNzd29yZC1maWVsZCcpLnZhbHVlO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiR08hXCIpO1xyXG5cdFx0XHRcdHRoaXMuY2xpZW50LnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHtwYXNzd29yZCwgc2VsX3BsYXllciwgbG9naW46IHRydWV9KSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5jb250ZW50X29iai5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChlKSA9PiB7IC8vIGhhbmRsZSBvYnNlcnZlZCBjaGFuZ2VzXHJcblx0XHRcdGNvbnNvbGUubG9nKGUpO1xyXG5cdFx0XHR0aGlzLiQoJy5wYXNzd29yZC1maWVsZCcpLmRpc2FibGVkID0gdGhpcy4kKCcub2JzZXJ2ZS1jaGVja2JveCcpLmNoZWNrZWQ7XHJcblx0XHR9KTtcclxuXHRcdHRoaXMuaGFuZGxlX21lc3NhZ2UgPSB0aGlzLmhhbmRsZV9tZXNzYWdlLmJpbmQodGhpcyk7XHJcblx0XHR0aGlzLmNsaWVudC5zb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy5oYW5kbGVfbWVzc2FnZSk7XHJcblx0fVxyXG5cclxuXHRoYW5kbGVfbWVzc2FnZShlKSB7XHJcblx0XHRsZXQgb2JqID0gSlNPTi5wYXJzZShlLmRhdGEpO1xyXG5cdFx0aWYob2JqLmF2YWlsX3BsYXllcnMpIHtcclxuXHRcdFx0bGV0IGN1cnJfcGxheWVybnVtID0gdGhpcy4kKGAuYXZhaWxhYmxlX3BsYXllcnMgaW5wdXRbY2hlY2tlZF1gKTtcclxuXHRcdFx0Y3Vycl9wbGF5ZXJudW0gPSBjdXJyX3BsYXllcm51bSAmJiArY3Vycl9wbGF5ZXJudW0uZGF0YXNldC5wbGF5ZXJudW07IC8vIGdldCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHBsYXllciBpZiB0aGVyZXMgYSBjaGVja2VkIGVsZW1lbnRcclxuXHRcdFx0dGhpcy4kKGAuYXZhaWxhYmxlX3BsYXllcnNgKS5pbm5lckhUTUwgPSBcIlwiOyAvLyBjbGVhciBpdC5cclxuXHRcdFx0Zm9yKGxldCBba2V5LCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKG9iai5hdmFpbF9wbGF5ZXJzKSkge1xyXG5cdFx0XHRcdGxldCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuXHRcdFx0XHRsYWJlbC50ZXh0Q29udGVudCA9IHZhbDtcclxuXHRcdFx0XHRsYWJlbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiOyAvLyBzbyB0aGF0IHRoZXkgZWFjaCBhcmUgb24gZGlmZmVyZW50IGxpbmVzXHJcblx0XHRcdFx0bGV0IHJhZGlvYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG5cdFx0XHRcdHJhZGlvYnV0dG9uLnR5cGUgPSBcInJhZGlvXCI7XHJcblx0XHRcdFx0cmFkaW9idXR0b24uZGF0YXNldC5wbGF5ZXJudW0gPSBrZXk7XHJcblx0XHRcdFx0cmFkaW9idXR0b24ubmFtZSA9IFwibG9naW4tdHlwZVwiO1xyXG5cdFx0XHRcdGxhYmVsLnByZXBlbmQocmFkaW9idXR0b24pOyAvLyBhZGQgaXQgYmVmb3JlIHRoZSB0ZXh0XHJcblx0XHRcdFx0dGhpcy4kKGAuYXZhaWxhYmxlX3BsYXllcnNgKS5hcHBlbmRDaGlsZChsYWJlbCk7XHJcblx0XHRcdFx0aWYoK2tleSA9PSBjdXJyX3BsYXllcm51bSkge1xyXG5cdFx0XHRcdFx0cmFkaW9idXR0b24uY2hlY2tlZCA9IHRydWU7XHJcblx0XHRcdFx0XHRjdXJyX3BsYXllcm51bSA9IG51bGw7IC8vIG1hcmsgdGhhdCB3ZSd2ZSByZXNvbHZlZCB0aGlzIGFuZCBkb24ndCBuZWVkIHRvIGNoZWNrIHRoZSBvYnNlcnZlLlxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRpZihjdXJyX3BsYXllcm51bSkgeyAvLyB0aGVyZSB3YXMgYSBwbGF5ZXIgY2hlY2tlZCwgYnV0IGl0J3MgZ29uZSBub3csIHNvIGdvIGJhY2sgdG8gb2JzZXJ2ZVxyXG5cdFx0XHRcdHRoaXMuJChgLm9ic2VydmUtY2hlY2tib3hgKS5jaGVja2VkID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYob2JqLmxvZ2luX2ZhaWwpIHtcclxuXHRcdFx0dGhpcy4kKCcubG9naW4tZmFpbC1yZWFzb24nKS50ZXh0Q29udGVudCA9IG9iai5sb2dpbl9mYWlsO1xyXG5cdFx0fVxyXG5cdFx0aWYob2JqLmxvZ2luX3N1Y2Nlc3MpIHtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Y2xvc2UoKSB7XHJcblx0XHR0aGlzLmNsaWVudC5zb2NrZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy5oYW5kbGVfbWVzc2FnZSk7XHJcblx0XHRzdXBlci5jbG9zZSguLi5hcmd1bWVudHMpO1xyXG5cdH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBMb2dpblBhbmVsO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG5jbGFzcyBQYW5lbCB7XHJcblx0Y29uc3RydWN0b3Ioe3dpZHRoPTQwMCwgaGVpZ2h0PTQwMCwgdGl0bGU9XCJcIiwgY2FuX2Nsb3NlID0gdHJ1ZX0gPSB7fSkge1xyXG5cdFx0dmFyIGxlZnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggLyAyIC0gd2lkdGggLyAyO1xyXG5cdFx0dmFyIHRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgLyAyIC0gaGVpZ2h0IC8gMjtcclxuXHRcdHRoaXMuY29udGFpbmVyX29iaiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0T2JqZWN0LmFzc2lnbih0aGlzLmNvbnRhaW5lcl9vYmouc3R5bGUsIHt3aWR0aDp3aWR0aCtcInB4XCIsIGhlaWdodDpoZWlnaHQrXCJweFwiLCBsZWZ0OmxlZnQrXCJweFwiLCB0b3A6dG9wK1wicHhcIn0pO1xyXG5cdFx0dGhpcy5jb250YWluZXJfb2JqLmNsYXNzTGlzdC5hZGQoJ3VpZnJhbWUtY29udGFpbmVyJyk7XHJcblx0XHR0aGlzLnBhbmVsX29iaiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0dGhpcy5wYW5lbF9vYmouY2xhc3NMaXN0LmFkZCgndWlmcmFtZScpO1xyXG5cdFx0dGhpcy5wYW5lbF9vYmoudGFiSW5kZXggPSAtMTtcclxuXHRcdHRoaXMuaGVhZGVyX29iaiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0dGhpcy5oZWFkZXJfb2JqLmNsYXNzTGlzdC5hZGQoJ3VpZnJhbWUtaGVhZGVyJyk7XHJcblx0XHR0aGlzLnRpdGxlX25vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aXRsZSk7XHJcblx0XHR0aGlzLmhlYWRlcl9vYmouYXBwZW5kQ2hpbGQodGhpcy50aXRsZV9ub2RlKTtcclxuXHRcdHRoaXMuY29udGVudF9vYmogPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdHRoaXMuY29udGVudF9vYmouY2xhc3NMaXN0LmFkZCgndWlmcmFtZS1jb250ZW50Jyk7XHJcblx0XHR0aGlzLnBhbmVsX29iai5hcHBlbmRDaGlsZCh0aGlzLmhlYWRlcl9vYmopO1xyXG5cdFx0dGhpcy5wYW5lbF9vYmouYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50X29iaik7XHJcblx0XHR0aGlzLmNvbnRhaW5lcl9vYmouYXBwZW5kQ2hpbGQodGhpcy5wYW5lbF9vYmopO1xyXG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VpZnJhbWVzLWNvbnRhaW5lcicpLmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyX29iaik7XHJcblxyXG5cdFx0dGhpcy5oZWFkZXJfb2JqLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fc3RhcnRfZHJhZy5iaW5kKHRoaXMpKTtcclxuXHRcdHRoaXMuY29udGFpbmVyX29iai5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX3N0YXJ0X3Jlc2l6ZS5iaW5kKHRoaXMpKTtcclxuXHRcdHRoaXMuY29udGFpbmVyX29iai5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuX2NvbnRhaW5lcl9tb3VzZW1vdmUuYmluZCh0aGlzKSk7XHJcblx0XHR0aGlzLmNvbnRhaW5lcl9vYmouYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIHRoaXMuX2NvbnRhaW5lcl9tb3VzZW91dC5iaW5kKHRoaXMpKTtcclxuXHJcblx0XHR0aGlzLmNhbl9jbG9zZSA9IGNhbl9jbG9zZTtcclxuXHJcblx0XHRpZihjYW5fY2xvc2UpIHtcclxuXHRcdFx0dGhpcy5jbG9zZV9idXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0dGhpcy5jbG9zZV9idXR0b24uY2xhc3NMaXN0LmFkZCgndWlmcmFtZS1jbG9zZS1idXR0b24nKTtcclxuXHRcdFx0dGhpcy5oZWFkZXJfb2JqLmFwcGVuZENoaWxkKHRoaXMuY2xvc2VfYnV0dG9uKTtcclxuXHJcblx0XHRcdHRoaXMuY2xvc2VfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5jbG9zZV9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRfc3RhcnRfZHJhZyhlKSB7XHJcblx0XHRpZihlLmRlZmF1bHRQcmV2ZW50ZWQpXHJcblx0XHRcdHJldHVybjtcclxuXHRcdGlmKGUudGFyZ2V0ICE9IHRoaXMuaGVhZGVyX29iaikge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHR2YXIgcGFkID0gKHRoaXMuY29udGFpbmVyX29iai5vZmZzZXRXaWR0aCAtIHRoaXMucGFuZWxfb2JqLm9mZnNldFdpZHRoKS8yO1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0dGhpcy5wYW5lbF9vYmouZm9jdXMoKTtcclxuXHRcdHZhciBsYXN0Y2xpZW50eCA9IGUuY2xpZW50WDtcclxuXHRcdHZhciBsYXN0Y2xpZW50eSA9IGUuY2xpZW50WTtcclxuXHRcdHZhciBtb3VzZW1vdmUgPSAoZSkgPT4ge1xyXG5cdFx0XHR2YXIgZHggPSBlLmNsaWVudFggLSBsYXN0Y2xpZW50eDtcclxuXHRcdFx0dmFyIGR5ID0gZS5jbGllbnRZIC0gbGFzdGNsaWVudHk7XHJcblx0XHRcdGxhc3RjbGllbnR4ID0gZS5jbGllbnRYO1xyXG5cdFx0XHRsYXN0Y2xpZW50eSA9IGUuY2xpZW50WTtcclxuXHRcdFx0dmFyIHtsZWZ0Om9sZGxlZnQsIHRvcDpvbGR0b3B9ID0gdGhpcy5jb250YWluZXJfb2JqLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cdFx0XHR0aGlzLmNvbnRhaW5lcl9vYmouc3R5bGUubGVmdCA9IE1hdGgubWluKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aC0xNjAtcGFkLCBNYXRoLm1heCgtcGFkLG9sZGxlZnQgKyBkeCkpICsgXCJweFwiO1xyXG5cdFx0XHR0aGlzLmNvbnRhaW5lcl9vYmouc3R5bGUudG9wID0gTWF0aC5taW4oZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodC0zNS1wYWQsIE1hdGgubWF4KC1wYWQsb2xkdG9wICsgZHkpKSArIFwicHhcIjtcclxuXHRcdH07XHJcblx0XHR2YXIgbW91c2V1cCA9ICgpID0+IHtcclxuXHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBtb3VzZW1vdmUpO1xyXG5cdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBtb3VzZXVwKTtcclxuXHRcdH07XHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG1vdXNlbW92ZSk7XHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBtb3VzZXVwKTtcclxuXHR9XHJcblxyXG5cdF9yZXNpemVfbWV0YShlKSB7IC8vIGZpZ3VyZSBvdXQgd2hpY2ggZWRnZSB0aGUgbW91c2UgY3Vyc29yIGlzIG9uIGFuZCByZXR1cm4gYW4gb2JqZWN0IHdpdGggdGhlIGFwcHJvcHJpYXRlIGZsYWdzXHJcblx0XHR2YXIgcGFkID0gKHRoaXMuY29udGFpbmVyX29iai5vZmZzZXRXaWR0aCAtIHRoaXMucGFuZWxfb2JqLm9mZnNldFdpZHRoKS8yO1xyXG5cdFx0dmFyIHdpZHRoID0gdGhpcy5wYW5lbF9vYmoub2Zmc2V0V2lkdGg7XHJcblx0XHR2YXIgaGVpZ2h0ID0gdGhpcy5wYW5lbF9vYmoub2Zmc2V0SGVpZ2h0O1xyXG5cdFx0dmFyIG91dCA9IHtkcmFnX3JpZ2h0OiBmYWxzZSwgZHJhZ19sZWZ0OiBmYWxzZSwgZHJhZ191cDogZmFsc2UsIGRyYWdfZG93bjogZmFsc2UsIGN1cnNvcjogXCJkZWZhdWx0XCJ9O1xyXG5cdFx0aWYoZS50YXJnZXQgPT0gdGhpcy5jb250YWluZXJfb2JqKSB7XHJcblx0XHRcdGlmKGUub2Zmc2V0WCA8IHBhZClcclxuXHRcdFx0XHRvdXQuZHJhZ19sZWZ0ID0gdHJ1ZTtcclxuXHRcdFx0aWYoZS5vZmZzZXRZIDwgcGFkKVxyXG5cdFx0XHRcdG91dC5kcmFnX3VwID0gdHJ1ZTtcclxuXHRcdFx0aWYoZS5vZmZzZXRYID4gKHdpZHRoICsgcGFkKSlcclxuXHRcdFx0XHRvdXQuZHJhZ19yaWdodCA9IHRydWU7XHJcblx0XHRcdGlmKGUub2Zmc2V0WSA+IChoZWlnaHQgKyBwYWQpKVxyXG5cdFx0XHRcdG91dC5kcmFnX2Rvd24gPSB0cnVlO1xyXG5cdFx0XHRpZigob3V0LmRyYWdfbGVmdCAmJiBvdXQuZHJhZ19kb3duKSB8fCAob3V0LmRyYWdfdXAgJiYgb3V0LmRyYWdfcmlnaHQpKSB7XHJcblx0XHRcdFx0b3V0LmN1cnNvciA9IFwibmVzdy1yZXNpemVcIjtcclxuXHRcdFx0fSBlbHNlIGlmKChvdXQuZHJhZ19sZWZ0ICYmIG91dC5kcmFnX3VwKSB8fCAob3V0LmRyYWdfZG93biAmJiBvdXQuZHJhZ19yaWdodCkpIHtcclxuXHRcdFx0XHRvdXQuY3Vyc29yID0gXCJud3NlLXJlc2l6ZVwiO1xyXG5cdFx0XHR9IGVsc2UgaWYob3V0LmRyYWdfbGVmdCB8fCBvdXQuZHJhZ19yaWdodCkge1xyXG5cdFx0XHRcdG91dC5jdXJzb3IgPSBcImV3LXJlc2l6ZVwiO1xyXG5cdFx0XHR9IGVsc2UgaWYob3V0LmRyYWdfdXAgfHwgb3V0LmRyYWdfZG93bikge1xyXG5cdFx0XHRcdG91dC5jdXJzb3IgPSBcIm5zLXJlc2l6ZVwiO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRvdXQuY2FuX3Jlc2l6ZSA9IG91dC5kcmFnX3JpZ2h0IHx8IG91dC5kcmFnX2xlZnQgfHwgb3V0LmRyYWdfdXAgfHwgb3V0LmRyYWdfZG93bjtcclxuXHRcdHJldHVybiBvdXQ7XHJcblx0fVxyXG5cclxuXHRfc3RhcnRfcmVzaXplKGUpIHtcclxuXHRcdC8vIGJyaW5nIHRoZSBwYW5lbCB0byB0aGUgZnJvbnRcclxuXHRcdGlmKHRoaXMuY29udGFpbmVyX29iaiAhPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWlmcmFtZXMtY29udGFpbmVyJykubGFzdENoaWxkKVxyXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWlmcmFtZXMtY29udGFpbmVyJykuYXBwZW5kQ2hpbGQodGhpcy5jb250YWluZXJfb2JqKTtcclxuXHJcblx0XHQvLyBmaWd1cmUgb3V0IHdoaWNoIGVkZ2VzIHdlJ3JlIHJlc2l6aW5nXHJcblx0XHR2YXIgcmVzaXplX21ldGEgPSB0aGlzLl9yZXNpemVfbWV0YShlKTtcclxuXHRcdGlmKCFyZXNpemVfbWV0YS5jYW5fcmVzaXplKSAvLyBvb2Ygd2UncmUgbm90IHJlc2l6aW5nXHJcblx0XHRcdHJldHVybjtcclxuXHRcdC8vIGZpZ3VyZSBvdXQgaG93IG11Y2ggc3BhY2UgaXMgYXJvdW5kIHRoZSBlZGdlc1xyXG5cdFx0dmFyIHBhZCA9ICh0aGlzLmNvbnRhaW5lcl9vYmoub2Zmc2V0V2lkdGggLSB0aGlzLnBhbmVsX29iai5vZmZzZXRXaWR0aCkvMjtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHRoaXMucGFuZWxfb2JqLmZvY3VzKCk7XHJcblx0XHR2YXIgbGFzdGNsaWVudHggPSBlLmNsaWVudFg7XHJcblx0XHR2YXIgbGFzdGNsaWVudHkgPSBlLmNsaWVudFk7XHJcblx0XHQvLyBub3cgc3RhcnQgZHJhZ2dpbmdcclxuXHRcdHZhciBtb3VzZW1vdmUgPSAoZSkgPT4ge1xyXG5cdFx0XHR2YXIgZHggPSBlLmNsaWVudFggLSBsYXN0Y2xpZW50eDtcclxuXHRcdFx0dmFyIGR5ID0gZS5jbGllbnRZIC0gbGFzdGNsaWVudHk7XHJcblx0XHRcdGxhc3RjbGllbnR4ID0gZS5jbGllbnRYO1xyXG5cdFx0XHRsYXN0Y2xpZW50eSA9IGUuY2xpZW50WTsgLy8gZmlndXJlIG91dCBob3cgbXVjaCB3ZSBtb3ZlZFxyXG5cdFx0XHR2YXIge2xlZnQ6b2xkbGVmdCwgdG9wOm9sZHRvcH0gPSB0aGlzLmNvbnRhaW5lcl9vYmouZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0XHRcdGlmKHJlc2l6ZV9tZXRhLmRyYWdfbGVmdCkgeyAvLyBhbmQgbm93IHJlc2l6ZSBvdXJzZWx2ZXNcclxuXHRcdFx0XHR0aGlzLmNvbnRhaW5lcl9vYmouc3R5bGUubGVmdCA9IE1hdGgubWluKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aC0xNjAtcGFkLE1hdGgubWF4KC1wYWQsb2xkbGVmdCArIGR4KSkgKyBcInB4XCI7XHJcblx0XHRcdFx0dGhpcy5jb250YWluZXJfb2JqLnN0eWxlLndpZHRoID0gTWF0aC5tYXgoMTYwLHRoaXMucGFuZWxfb2JqLmNsaWVudFdpZHRoIC0gZHgpICsgXCJweFwiO1xyXG5cdFx0XHR9IGVsc2UgaWYocmVzaXplX21ldGEuZHJhZ19yaWdodCkge1xyXG5cdFx0XHRcdHRoaXMuY29udGFpbmVyX29iai5zdHlsZS53aWR0aCA9IE1hdGgubWF4KDE2MCx0aGlzLnBhbmVsX29iai5jbGllbnRXaWR0aCArIGR4KSArIFwicHhcIjtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihyZXNpemVfbWV0YS5kcmFnX3VwKSB7XHJcblx0XHRcdFx0dGhpcy5jb250YWluZXJfb2JqLnN0eWxlLnRvcCA9IE1hdGgubWluKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQtMzUtcGFkLE1hdGgubWF4KC1wYWQsb2xkdG9wICsgZHkpKSArIFwicHhcIjtcclxuXHRcdFx0XHR0aGlzLmNvbnRhaW5lcl9vYmouc3R5bGUuaGVpZ2h0ID0gTWF0aC5tYXgoMzUsdGhpcy5wYW5lbF9vYmouY2xpZW50SGVpZ2h0IC0gZHkpICsgXCJweFwiO1xyXG5cdFx0XHR9IGVsc2UgaWYocmVzaXplX21ldGEuZHJhZ19kb3duKSB7XHJcblx0XHRcdFx0dGhpcy5jb250YWluZXJfb2JqLnN0eWxlLmhlaWdodCA9IE1hdGgubWF4KDM1LHRoaXMucGFuZWxfb2JqLmNsaWVudEhlaWdodCArIGR5KSArIFwicHhcIjtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdHZhciBtb3VzZXVwID0gKCkgPT4ge1xyXG5cdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG1vdXNlbW92ZSk7XHJcblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG1vdXNldXApO1xyXG5cdFx0fTtcclxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbW91c2Vtb3ZlKTtcclxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG1vdXNldXApO1xyXG5cdH1cclxuXHJcblx0X2NvbnRhaW5lcl9tb3VzZW1vdmUoZSkge1xyXG5cdFx0dmFyIHJlc2l6ZV9tZXRhID0gdGhpcy5fcmVzaXplX21ldGEoZSk7XHJcblx0XHR0aGlzLmNvbnRhaW5lcl9vYmouc3R5bGUuY3Vyc29yID0gcmVzaXplX21ldGEuY3Vyc29yO1xyXG5cdH1cclxuXHRfY29udGFpbmVyX21vdXNlb3V0KCkge1xyXG5cdFx0dGhpcy5jb250YWluZXJfb2JqLnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xyXG5cdH1cclxuXHJcblx0Z2V0IHRpdGxlKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMudGl0bGVfbm9kZS50ZXh0Q29udGVudDtcclxuXHR9XHJcblxyXG5cdHNldCB0aXRsZSh2YWwpIHtcclxuXHRcdHRoaXMudGl0bGVfbm9kZS50ZXh0Q29udGVudCA9IHZhbDtcclxuXHR9XHJcblxyXG5cdGNsb3NlKCkge1xyXG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VpZnJhbWVzLWNvbnRhaW5lcicpLnJlbW92ZUNoaWxkKHRoaXMuY29udGFpbmVyX29iaik7IC8vIHJlbW92ZSBvdXJzZWx2ZXMhXHJcblx0XHRpZih0aGlzLmNsb3NlX3Byb21pc2VfcmVzb2x2ZSlcclxuXHRcdFx0dGhpcy5jbG9zZV9wcm9taXNlX3Jlc29sdmUoKTtcclxuXHR9XHJcblxyXG5cdHdhaXRfdW50aWxfY2xvc2UoKSB7XHJcblx0XHRpZih0aGlzLmNsb3NlX3Byb21pc2UpXHJcblx0XHRcdHJldHVybiB0aGlzLmNsb3NlX3Byb21pc2U7XHJcblx0XHRyZXR1cm4gdGhpcy5jbG9zZV9wcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcblx0XHRcdHRoaXMuY2xvc2VfcHJvbWlzZV9yZXNvbHZlID0gcmVzb2x2ZTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Ly8gY29udmVuaWVuY2UgZnVuY3Rpb25zXHJcblx0JChzZWwpIHtcclxuXHRcdHJldHVybiB0aGlzLmNvbnRlbnRfb2JqLnF1ZXJ5U2VsZWN0b3Ioc2VsKTtcclxuXHR9XHJcblx0JCQoc2VsKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5jb250ZW50X29iai5xdWVyeVNlbGVjdG9yQWxsKHNlbCk7XHJcblx0fVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFBhbmVsO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcbmNvbnN0IFBhbmVsID0gcmVxdWlyZSgnLi9wYW5lbC5qcycpO1xyXG5cclxuY2xhc3MgUHJvbXB0UGFuZWwgZXh0ZW5kcyBQYW5lbCB7XHJcblx0Y29uc3RydWN0b3IodGl0bGUpIHtcclxuXHRcdHN1cGVyKHt3aWR0aDogNDAwLCBoZWlnaHQ6IDEwMCwgdGl0bGV9KTtcclxuXHRcdHRoaXMuY29udGVudF9vYmouaW5uZXJIVE1MID0gYFxyXG48aW5wdXQgc3R5bGU9J3dpZHRoOjkwJScgdHlwZT0ndGV4dCcgY2xhc3M9J3Byb21wdC12YWx1ZSc+PC9pbnB1dD5cclxuPGlucHV0IHR5cGU9J2J1dHRvbicgY2xhc3M9J2NvbmZpcm0tYnV0dG9uJyB2YWx1ZT0nT0snPlxyXG5gO1xyXG5cdFx0dGhpcy5yZXR1cm5fdmFsID0gbnVsbDtcclxuXHRcdHRoaXMuJCgnLmNvbmZpcm0tYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy5yZXR1cm5fdmFsID0gdGhpcy4kKCcucHJvbXB0LXZhbHVlJykudmFsdWU7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy4kKCcucHJvbXB0LXZhbHVlJykuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcclxuXHRcdFx0aWYoZS53aGljaCA9PSAxMykgeyAvLyBlbnRlclxyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHR0aGlzLnJldHVybl92YWwgPSB0aGlzLiQoJy5wcm9tcHQtdmFsdWUnKS52YWx1ZTtcclxuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0dGhpcy4kKCcucHJvbXB0LXZhbHVlJykuZm9jdXMoKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHZhbHVlX3Byb21pc2UoKSB7XHJcblx0XHRhd2FpdCB0aGlzLndhaXRfdW50aWxfY2xvc2UoKTtcclxuXHRcdHJldHVybiB0aGlzLnJldHVybl92YWw7XHJcblx0fVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFByb21wdFBhbmVsO1xyXG4iLCJtb2R1bGUuZXhwb3J0cz17XHJcblx0XCJjaGFyYWN0ZXJzXCI6IFtcclxuXHRcdHtcclxuXHRcdFx0XCJuYW1lXCI6IFwiQ29ubi1SLUhTTi0xXCJcclxuXHRcdH0sXHJcblx0XHR7XHJcblx0XHRcdFwibmFtZVwiOiBcIkRvdWdsYXMtUi1ZRUUtMVwiXHJcblx0XHR9LFxyXG5cdFx0e1xyXG5cdFx0XHRcIm5hbWVcIjogXCJKb2huLVItU1ZOLTFcIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJuYW1lXCI6IFwiS3ltLVItQUhJLTFcIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJuYW1lXCI6IFwiTW9yZ2FuLVItRE5SLTFcIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJuYW1lXCI6IFwiUGF0LVItU1dGLTFcIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJuYW1lXCI6IFwiQm9iLVItRUdILTFcIlxyXG5cdFx0fSxcclxuXHRcdFxyXG5cdF1cclxufSJdfQ=="}